<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        
        <title>
            
    
    1.3 Changelog
 &mdash;
    SQLAlchemy 1.3 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../_static/changelog.css" type="text/css" />
                <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
        <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="SQLAlchemy 1.3 Documentation" href="../index.html" />
        <link rel="up" title="Changes and Migration" href="index.html" />
        <link rel="next" title="1.2 Changelog" href="changelog_12.html" />
        <link rel="prev" title="What’s New in SQLAlchemy 1.3?" href="migration_13.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">1.3.6</span>


        | Release Date: July 21, 2019

    </div>

    <h1>SQLAlchemy 1.3 Documentation</h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">


        <div id="docs-sidebar-popout">
            <h3><a href="../index.html">SQLAlchemy 1.3 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../contents.html">Contents</a> |
                <a href="../genindex.html">Index</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="index.html" title="Changes and Migration">Changes and Migration</a>
        </h3>

        <ul>
<li><span class="link-container"><a class="reference external" href="migration_13.html">What’s New in SQLAlchemy 1.3?</a></span></li>
<li class="selected"><span class="link-container"><strong>1.3 Changelog</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-1.3.6">1.3.6</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-1.3.6-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.6-engine">engine</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.6-sql">sql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.6-postgresql">postgresql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.6-mysql">mysql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.6-sqlite">sqlite</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.6-mssql">mssql</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.5">1.3.5</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-1.3.5-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.5-sql">sql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.5-postgresql">postgresql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.5-mysql">mysql</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.4">1.3.4</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-1.3.4-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.4-engine">engine</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.4-sql">sql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.4-postgresql">postgresql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.4-mysql">mysql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.4-mssql">mssql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.4-misc">misc</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.3">1.3.3</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-1.3.3-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.3-postgresql">postgresql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.3-mssql">mssql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.3-misc">misc</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.2">1.3.2</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-1.3.2-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.2-sql">sql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.2-postgresql">postgresql</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.1">1.3.1</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-1.3.1-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.1-mssql">mssql</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0">1.3.0</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0-engine">engine</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0-sql">sql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0-schema">schema</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b3">1.3.0b3</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b3-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b3-orm-declarative">orm declarative</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b3-sql">sql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b3-postgresql">postgresql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b3-misc">misc</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b2">1.3.0b2</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b2-general">general</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b2-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b2-orm-declarative">orm declarative</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b2-engine">engine</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b2-sql">sql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b2-mssql">mssql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b2-misc">misc</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b1">1.3.0b1</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b1-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b1-orm-declarative">orm declarative</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b1-engine">engine</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b1-sql">sql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b1-postgresql">postgresql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b1-mysql">mysql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b1-sqlite">sqlite</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b1-mssql">mssql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b1-oracle">oracle</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-1.3.0b1-misc">misc</a></span></li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="changelog_12.html">1.2 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_11.html">1.1 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_10.html">1.0 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_09.html">0.9 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_08.html">0.8 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_07.html">0.7 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_06.html">0.6 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_05.html">0.5 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_04.html">0.4 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_03.html">0.3 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_02.html">0.2 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_01.html">0.1 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_12.html">What’s New in SQLAlchemy 1.2?</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_11.html">What’s New in SQLAlchemy 1.1?</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_10.html">What’s New in SQLAlchemy 1.0?</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_09.html">What’s New in SQLAlchemy 0.9?</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_08.html">What’s New in SQLAlchemy 0.8?</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_07.html">What’s New in SQLAlchemy 0.7?</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_06.html">What’s New in SQLAlchemy 0.6?</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_05.html">What’s new in SQLAlchemy 0.5?</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_04.html">What’s new in SQLAlchemy 0.4?</a></span></li>
</ul>



        </div>

        </div>

    </div>

    

    <div id="docs-body" class="withsidebar" >
        
<div class="section" id="changelog">
<h1>1.3 Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<div class="section" id="change-1.3.6">
<h2>1.3.6<a class="headerlink" href="#change-1.3.6" title="Permalink to this headline">¶</a></h2>
Released: July 21, 2019<div class="section" id="change-1.3.6-orm">
<h3>orm<a class="headerlink" href="#change-1.3.6-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.6-0"><span class="target" id="change-dd0f089772d6d70336d9f15737495fe8"><strong>[orm] [feature] </strong></span><p>Added new loader option method <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.strategy_options.Load.options" title="sqlalchemy.orm.strategy_options.Load.options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Load.options()</span></code></a> which allows loader
options to be constructed hierarchically, so that many sub-options can be
applied to a particular path without needing to call <a class="reference internal" href="../orm/loading_relationships.html#sqlalchemy.orm.defaultload" title="sqlalchemy.orm.defaultload"><code class="xref py py-func docutils literal notranslate"><span class="pre">defaultload()</span></code></a>
many times.  Thanks to Alessio Bogon for the idea.</p>
<a class="changeset-link headerlink reference internal" href="#change-dd0f089772d6d70336d9f15737495fe8">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4736">#4736</a></p>
</p>
</li>
<li><p id="change-1.3.6-1"><span class="target" id="change-c7ec6081d782036102725c5259e22182"><strong>[orm] [bug] </strong></span><p>Fixed regression caused by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4365">#4365</a> where a join from an entity to
itself without using aliases no longer raises an informative error message,
instead failing on an assertion.  The informative error condition has been
restored.</p>
<a class="changeset-link headerlink reference internal" href="#change-c7ec6081d782036102725c5259e22182">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4773">#4773</a></p>
</p>
</li>
<li><p id="change-1.3.6-2"><span class="target" id="change-69112dd0e0428007dad23c417534d7eb"><strong>[orm] [bug] </strong></span><p>Fixed an issue where the <code class="xref py py-meth docutils literal notranslate"><span class="pre">orm._ORMJoin.join()</span></code> method, which is a
not-internally-used ORM-level method that exposes what is normally an
internal process of <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.join()</span></code></a>, did not propagate the <code class="docutils literal notranslate"><span class="pre">full</span></code> and
<code class="docutils literal notranslate"><span class="pre">outerjoin</span></code> keyword arguments correctly.  Pull request courtesy Denis
Kataev.</p>
<a class="changeset-link headerlink reference internal" href="#change-69112dd0e0428007dad23c417534d7eb">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4713">#4713</a></p>
</p>
</li>
<li><p id="change-1.3.6-3"><span class="target" id="change-ba2299f83c70a5386392cab48c65061f"><strong>[orm] [bug] </strong></span><p>Fixed bug where a many-to-one relationship that specified <code class="docutils literal notranslate"><span class="pre">uselist=True</span></code>
would fail to update correctly during a primary key change where a related
column needs to change.</p>
<a class="changeset-link headerlink reference internal" href="#change-ba2299f83c70a5386392cab48c65061f">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4772">#4772</a></p>
</p>
</li>
<li><p id="change-1.3.6-4"><span class="target" id="change-55ecf4cbe0d5787c158b619bc51af81a"><strong>[orm] [bug] </strong></span><p>Fixed bug where the detection for many-to-one or one-to-one use with a
“dynamic” relationship, which is an invalid configuration, would fail to
raise if the relationship were configured with <code class="docutils literal notranslate"><span class="pre">uselist=True</span></code>.  The
current fix is that it warns, instead of raises, as this would otherwise be
backwards incompatible, however in a future release it will be a raise.</p>
<a class="changeset-link headerlink reference internal" href="#change-55ecf4cbe0d5787c158b619bc51af81a">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4772">#4772</a></p>
</p>
</li>
<li><p id="change-1.3.6-5"><span class="target" id="change-9143b9288ce80712f75000eaaec97079"><strong>[orm] [bug] </strong></span><p>Fixed bug where a synonym created against a mapped attribute that does not
exist yet, as is the case when it refers to backref before mappers are
configured, would raise recursion errors when trying to test for attributes
on it which ultimately don’t exist (as occurs when the classes are run
through Sphinx autodoc), as the unconfigured state of the synonym would put
it into an attribute not found loop.</p>
<a class="changeset-link headerlink reference internal" href="#change-9143b9288ce80712f75000eaaec97079">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4767">#4767</a></p>
</p>
</li>
<li><p id="change-1.3.6-6"><span class="target" id="change-d429cd07ca375fb2d5c718aa412d3992"><strong>[orm] [performance] </strong></span><p>The optimzation applied to selectin loading in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4340">#4340</a> where a JOIN
is not needed to eagerly load related items is now applied to many-to-one
relationships as well, so that only the related table is queried for a
simple join condition.   In this case, the related items are queried
based on the value of a foreign key column on the parent; if these columns
are deferred or otherwise not loaded on any of the parent objects in
the collection, the loader falls back to the JOIN method.</p>
<a class="changeset-link headerlink reference internal" href="#change-d429cd07ca375fb2d5c718aa412d3992">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4775">#4775</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.6-engine">
<h3>engine<a class="headerlink" href="#change-1.3.6-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.6-7"><span class="target" id="change-ae910a3904bdfbc4b9bdeef3482567dc"><strong>[engine] [bug] </strong></span><p>Fixed bug where using reflection function such as <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData.reflect" title="sqlalchemy.schema.MetaData.reflect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.reflect()</span></code></a>
with an <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object that had execution options applied to it
would fail, as the resulting <code class="xref py py-class docutils literal notranslate"><span class="pre">OptionEngine</span></code> proxy object failed to
include a <code class="docutils literal notranslate"><span class="pre">.engine</span></code> attribute used within the reflection routines.</p>
<a class="changeset-link headerlink reference internal" href="#change-ae910a3904bdfbc4b9bdeef3482567dc">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4754">#4754</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.6-sql">
<h3>sql<a class="headerlink" href="#change-1.3.6-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.6-8"><span class="target" id="change-07b0b0d7547c2a3de1465b661178d822"><strong>[sql] [bug] </strong></span><p>Adjusted the initialization for <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></a> to minimize how often it
invokes the <code class="docutils literal notranslate"><span class="pre">.__members__</span></code> attribute of a given PEP-435 enumeration
object, to suit the case where this attribute is expensive to invoke, as is
the case for some popular third party enumeration libraries.</p>
<a class="changeset-link headerlink reference internal" href="#change-07b0b0d7547c2a3de1465b661178d822">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4758">#4758</a></p>
</p>
</li>
<li><p id="change-1.3.6-9"><span class="target" id="change-1a9048039acb73e027205fe857ead6ad"><strong>[sql] [bug] [postgresql] </strong></span><p>Fixed issue where the <a class="reference internal" href="../core/functions.html#sqlalchemy.sql.functions.array_agg" title="sqlalchemy.sql.functions.array_agg"><code class="xref py py-class docutils literal notranslate"><span class="pre">array_agg</span></code></a> construct in combination with
<a class="reference internal" href="../core/functions.html#sqlalchemy.sql.functions.FunctionElement.filter" title="sqlalchemy.sql.functions.FunctionElement.filter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FunctionElement.filter()</span></code></a> would not produce the correct operator
precedence in combination with the array index operator.</p>
<a class="changeset-link headerlink reference internal" href="#change-1a9048039acb73e027205fe857ead6ad">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4760">#4760</a></p>
</p>
</li>
<li><p id="change-1.3.6-10"><span class="target" id="change-6d31ce658d3b6da9ceb5b0469739a672"><strong>[sql] [bug] </strong></span><p>Fixed an unlikely issue where the “corresponding column” routine for unions
and other <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.CompoundSelect" title="sqlalchemy.sql.expression.CompoundSelect"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompoundSelect</span></code></a> objects could return the wrong column in
some overlapping column situtations, thus potentially impacting some ORM
operations when set operations are in use, if the underlying
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a> constructs were used previously in other similar kinds of
routines, due to a cached value not being cleared.</p>
<a class="changeset-link headerlink reference internal" href="#change-6d31ce658d3b6da9ceb5b0469739a672">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4747">#4747</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.6-postgresql">
<h3>postgresql<a class="headerlink" href="#change-1.3.6-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.6-11"><span class="target" id="change-b688caaa5b852fed2dee3a63c09fefea"><strong>[postgresql] [usecase] </strong></span><p>Added support for reflection of indexes on PostgreSQL partitioned tables,
which was added to PostgreSQL as of version 11.</p>
<a class="changeset-link headerlink reference internal" href="#change-b688caaa5b852fed2dee3a63c09fefea">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4771">#4771</a></p>
</p>
</li>
<li><p id="change-1.3.6-12"><span class="target" id="change-1684f4b94cf2ce70ed82d77524fa0ec6"><strong>[postgresql] [usecase] </strong></span><p>Added support for multidimensional Postgresql array literals via nesting
the <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.array" title="sqlalchemy.dialects.postgresql.array"><code class="xref py py-class docutils literal notranslate"><span class="pre">postgresql.array</span></code></a> object within another one.  The
multidimensional array type is detected automatically.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.array" title="sqlalchemy.dialects.postgresql.array"><code class="xref py py-class docutils literal notranslate"><span class="pre">postgresql.array</span></code></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-1684f4b94cf2ce70ed82d77524fa0ec6">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4756">#4756</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.6-mysql">
<h3>mysql<a class="headerlink" href="#change-1.3.6-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.6-13"><span class="target" id="change-6e5af8406937bb823d9de0be1f0b2066"><strong>[mysql] [bug] </strong></span><p>Fixed bug where the special logic to render “NULL” for the
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.TIMESTAMP" title="sqlalchemy.types.TIMESTAMP"><code class="xref py py-class docutils literal notranslate"><span class="pre">TIMESTAMP</span></code></a> datatype when <code class="docutils literal notranslate"><span class="pre">nullable=True</span></code> would not work if the
column’s datatype were a <a class="reference internal" href="../core/custom_types.html#sqlalchemy.types.TypeDecorator" title="sqlalchemy.types.TypeDecorator"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code></a> or a <a class="reference internal" href="../core/type_api.html#sqlalchemy.types.Variant" title="sqlalchemy.types.Variant"><code class="xref py py-class docutils literal notranslate"><span class="pre">Variant</span></code></a>.
The logic now ensures that it unwraps down to the original
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.TIMESTAMP" title="sqlalchemy.types.TIMESTAMP"><code class="xref py py-class docutils literal notranslate"><span class="pre">TIMESTAMP</span></code></a> so that this special case NULL keyword is correctly
rendered when requested.</p>
<a class="changeset-link headerlink reference internal" href="#change-6e5af8406937bb823d9de0be1f0b2066">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4743">#4743</a></p>
</p>
</li>
<li><p id="change-1.3.6-14"><span class="target" id="change-89be6e7618116a4f448ec39de9d26342"><strong>[mysql] [bug] </strong></span><p>Enhanced MySQL/MariaDB version string parsing to accommodate for exotic
MariaDB version strings where the “MariaDB” word is embedded among other
alphanumeric characters such as “MariaDBV1”.   This detection is critical in
order to correctly accommodate for API features that have split between MySQL
and MariaDB such as the “transaction_isolation” system variable.</p>
<a class="changeset-link headerlink reference internal" href="#change-89be6e7618116a4f448ec39de9d26342">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4624">#4624</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.6-sqlite">
<h3>sqlite<a class="headerlink" href="#change-1.3.6-sqlite" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.6-15"><span class="target" id="change-ff72be221ca8833a7265864456027d5e"><strong>[sqlite] [usecase] </strong></span><p>Added support for composite (tuple) IN operators with SQLite, by rendering
the VALUES keyword for this backend.  As other backends such as DB2 are
known to use the same syntax, the syntax is enabled in the base compiler
using a dialect-level flag <code class="docutils literal notranslate"><span class="pre">tuple_in_values</span></code>.   The change also includes
support for “empty IN tuple” expressions for SQLite when using “in_()”
between a tuple value and an empty set.</p>
<a class="changeset-link headerlink reference internal" href="#change-ff72be221ca8833a7265864456027d5e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4766">#4766</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.6-mssql">
<h3>mssql<a class="headerlink" href="#change-1.3.6-mssql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.6-16"><span class="target" id="change-be70c0ec4b1f10a6e52a0fabfbcd464d"><strong>[mssql] [bug] </strong></span><p>Ensured that the queries used to reflect indexes and view definitions will
explicitly CAST string parameters into NVARCHAR, as many SQL Server drivers
frequently treat string values, particularly those with non-ascii
characters or larger string values, as TEXT which often don’t compare
correctly against VARCHAR characters in SQL Server’s information schema
tables for some reason.    These CAST operations already take place for
reflection queries against SQL Server <code class="docutils literal notranslate"><span class="pre">information_schema.</span></code> tables but
were missing from three additional queries that are against <code class="docutils literal notranslate"><span class="pre">sys.</span></code>
tables.</p>
<a class="changeset-link headerlink reference internal" href="#change-be70c0ec4b1f10a6e52a0fabfbcd464d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4745">#4745</a></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-1.3.5">
<h2>1.3.5<a class="headerlink" href="#change-1.3.5" title="Permalink to this headline">¶</a></h2>
Released: June 17, 2019<div class="section" id="change-1.3.5-orm">
<h3>orm<a class="headerlink" href="#change-1.3.5-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.5-0"><span class="target" id="change-f7c6e23c686ccca2d91410a9b1943902"><strong>[orm] [bug] </strong></span><p>Fixed a series of related bugs regarding joined table inheritance more than
two levels deep, in conjunction with modification to primary key values,
where those primary key columns are also linked together in a foreign key
relationship as is typical for joined table inheritance.  The intermediary
table in a  three-level inheritance hierarchy will now get its UPDATE if
only the primary key value has changed and passive_updates=False (e.g.
foreign key constraints not being enforced), whereas before it would be
skipped; similarly, with passive_updates=True (e.g. ON UPDATE  CASCADE in
effect), the third-level table will not receive an UPDATE statement as was
the case earlier which would fail since CASCADE already modified it.   In a
related issue, a relationship linked to a three-level inheritance hierarchy
on the primary key of an intermediary table of a joined-inheritance
hierarchy will also correctly have its foreign key column updated when the
parent object’s primary key is modified, even if that parent object is a
subclass of the linked parent class, whereas before these classes would
not be counted.</p>
<a class="changeset-link headerlink reference internal" href="#change-f7c6e23c686ccca2d91410a9b1943902">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4723">#4723</a></p>
</p>
</li>
<li><p id="change-1.3.5-1"><span class="target" id="change-c9c1a19084805538d2fccfc0b1a689d4"><strong>[orm] [bug] </strong></span><p>Fixed bug where the <a class="reference internal" href="../orm/mapping_api.html#sqlalchemy.orm.mapper.Mapper.all_orm_descriptors" title="sqlalchemy.orm.mapper.Mapper.all_orm_descriptors"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.all_orm_descriptors</span></code></a> accessor would
return an entry for the <a class="reference internal" href="../orm/mapping_api.html#sqlalchemy.orm.mapper.Mapper" title="sqlalchemy.orm.mapper.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> itself under the declarative
<code class="docutils literal notranslate"><span class="pre">__mapper___</span></code> key, when this is not a descriptor.  The <code class="docutils literal notranslate"><span class="pre">.is_attribute</span></code>
flag that’s present on all <a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.base.InspectionAttr" title="sqlalchemy.orm.base.InspectionAttr"><code class="xref py py-class docutils literal notranslate"><span class="pre">InspectionAttr</span></code></a> objects is now
consulted, which has also been modified to be <code class="docutils literal notranslate"><span class="pre">True</span></code> for an association
proxy, as it was erroneously set to False for this object.</p>
<a class="changeset-link headerlink reference internal" href="#change-c9c1a19084805538d2fccfc0b1a689d4">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4729">#4729</a></p>
</p>
</li>
<li><p id="change-1.3.5-2"><span class="target" id="change-991345d7f98890b7261c0d30fb6a04d8"><strong>[orm] [bug] </strong></span><p>Fixed regression in <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.join()</span></code></a> where the <code class="docutils literal notranslate"><span class="pre">aliased=True</span></code> flag
would not properly apply clause adaptation to filter criteria, if a
previous join were made to the same entity.  This is because the adapters
were placed in the wrong order.   The order has been reversed so that the
adapter for the most recent <code class="docutils literal notranslate"><span class="pre">aliased=True</span></code> call takes precedence as was
the case in 1.2 and earlier.  This broke the “elementtree” examples among
other things.</p>
<a class="changeset-link headerlink reference internal" href="#change-991345d7f98890b7261c0d30fb6a04d8">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4704">#4704</a></p>
</p>
</li>
<li><p id="change-1.3.5-3"><span class="target" id="change-fd43017653e0dd9231d909e5f82ad982"><strong>[orm] [bug] [py3k] </strong></span><p>Replaced the Python compatbility routines for <code class="docutils literal notranslate"><span class="pre">getfullargspec()</span></code> with a
fully vendored version from Python 3.3.  Originally, Python was emitting
deprecation warnings for this function in Python 3.8 alphas.  While this
change was reverted, it was observed that Python 3 implementations for
<code class="docutils literal notranslate"><span class="pre">getfullargspec()</span></code> are an order of magnitude slower as of the 3.4 series
where it was rewritten against <code class="docutils literal notranslate"><span class="pre">Signature</span></code>.  While Python plans to
improve upon this situation, SQLAlchemy projects for now are using a simple
replacement to avoid any future issues.</p>
<a class="changeset-link headerlink reference internal" href="#change-fd43017653e0dd9231d909e5f82ad982">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4674">#4674</a></p>
</p>
</li>
<li><p id="change-1.3.5-4"><span class="target" id="change-41bce3204362cd2cb28f50f62ba6d8cc"><strong>[orm] [bug] </strong></span><p>Reworked the attribute mechanics used by <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.util.AliasedClass" title="sqlalchemy.orm.util.AliasedClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">AliasedClass</span></code></a> to no
longer rely upon calling <code class="docutils literal notranslate"><span class="pre">__getattribute__</span></code> on the MRO of the wrapped
class, and to instead resolve the attribute normally on the wrapped class
using getattr(), and then unwrap/adapt that.  This allows a greater range
of attribute styles on the mapped class including special <code class="docutils literal notranslate"><span class="pre">__getattr__()</span></code>
schemes; but it also makes the code simpler and more resilient in general.</p>
<a class="changeset-link headerlink reference internal" href="#change-41bce3204362cd2cb28f50f62ba6d8cc">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4694">#4694</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.5-sql">
<h3>sql<a class="headerlink" href="#change-1.3.5-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.5-5"><span class="target" id="change-81d45dad5dfea3a321cfc4ddf0e773a9"><strong>[sql] [bug] </strong></span><p>Fixed a series of quoting issues which all stemmed from the concept of the
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.literal_column" title="sqlalchemy.sql.expression.literal_column"><code class="xref py py-func docutils literal notranslate"><span class="pre">literal_column()</span></code></a> construct, which when being “proxied” through a
subquery to be referred towards by a label that matches its text, the label
would not have quoting rules applied to it, even if the string in the
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.Label" title="sqlalchemy.sql.expression.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> were set up as a <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.elements.quoted_name" title="sqlalchemy.sql.elements.quoted_name"><code class="xref py py-class docutils literal notranslate"><span class="pre">quoted_name</span></code></a> construct.  Not
applying quoting to the text of the <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.Label" title="sqlalchemy.sql.expression.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">Label</span></code></a> is a bug because this
text is strictly a SQL identifier name and not a SQL expression, and the
string should not have quotes embedded into it already unlike the
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.literal_column" title="sqlalchemy.sql.expression.literal_column"><code class="xref py py-func docutils literal notranslate"><span class="pre">literal_column()</span></code></a> which it may be applied towards.   The existing
behavior of a non-labeled <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.literal_column" title="sqlalchemy.sql.expression.literal_column"><code class="xref py py-func docutils literal notranslate"><span class="pre">literal_column()</span></code></a> being propagated as is on
the outside of a subquery is maintained in order to help with manual
quoting schemes, although it’s not clear if valid SQL can be generated for
such a construct in any case.</p>
<a class="changeset-link headerlink reference internal" href="#change-81d45dad5dfea3a321cfc4ddf0e773a9">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4730">#4730</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.5-postgresql">
<h3>postgresql<a class="headerlink" href="#change-1.3.5-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.5-6"><span class="target" id="change-5c60f9aab3a30f6f1b43661495ad0269"><strong>[postgresql] [bug] </strong></span><p>Fixed bug where PostgreSQL dialect could not correctly reflect an ENUM
datatype that has no members, returning a list with <code class="docutils literal notranslate"><span class="pre">None</span></code> for the
<code class="docutils literal notranslate"><span class="pre">get_enums()</span></code> call and raising a TypeError when reflecting a column which
has such a datatype.   The inspection now returns an empty list.</p>
<a class="changeset-link headerlink reference internal" href="#change-5c60f9aab3a30f6f1b43661495ad0269">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4701">#4701</a></p>
</p>
</li>
<li><p id="change-1.3.5-7"><span class="target" id="change-526670499c184afa2ce093f917b35210"><strong>[postgresql] [usecase] </strong></span><p>Added support for column sorting flags when reflecting indexes for
PostgreSQL, including ASC, DESC, NULLSFIRST, NULLSLAST.  Also adds this
facility to the reflection system in general which can be applied to other
dialects in future releases.  Pull request courtesy Eli Collins.</p>
<a class="changeset-link headerlink reference internal" href="#change-526670499c184afa2ce093f917b35210">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4717">#4717</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.5-mysql">
<h3>mysql<a class="headerlink" href="#change-1.3.5-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.5-8"><span class="target" id="change-d76da00b79420e9a267ca7c27d58299f"><strong>[mysql] [bug] </strong></span><p>Fixed bug where MySQL ON DUPLICATE KEY UPDATE would not accommodate setting
a column to the value NULL.  Pull request courtesy Lukáš Banič.</p>
<a class="changeset-link headerlink reference internal" href="#change-d76da00b79420e9a267ca7c27d58299f">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4715">#4715</a></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-1.3.4">
<h2>1.3.4<a class="headerlink" href="#change-1.3.4" title="Permalink to this headline">¶</a></h2>
Released: May 27, 2019<div class="section" id="change-1.3.4-orm">
<h3>orm<a class="headerlink" href="#change-1.3.4-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.4-0"><span class="target" id="change-0ea0758835a5ae7f10532509018f04c4"><strong>[orm] [bug] </strong></span><p>Fixed issue where the <a class="reference internal" href="../orm/events.html#sqlalchemy.orm.events.AttributeEvents.params.active_history" title="sqlalchemy.orm.events.AttributeEvents"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">AttributeEvents.active_history</span></code></a> flag
would not be set for an event listener that propgated to a subclass via the
<a class="reference internal" href="../orm/events.html#sqlalchemy.orm.events.AttributeEvents.params.propagate" title="sqlalchemy.orm.events.AttributeEvents"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">AttributeEvents.propagate</span></code></a> flag.   This bug has been present
for the full span of the <a class="reference internal" href="../orm/events.html#sqlalchemy.orm.events.AttributeEvents" title="sqlalchemy.orm.events.AttributeEvents"><code class="xref py py-class docutils literal notranslate"><span class="pre">AttributeEvents</span></code></a> system.</p>
<a class="changeset-link headerlink reference internal" href="#change-0ea0758835a5ae7f10532509018f04c4">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4695">#4695</a></p>
</p>
</li>
<li><p id="change-1.3.4-1"><span class="target" id="change-a4efe1aa09e4791c6800b91874f6f0fd"><strong>[orm] [bug] </strong></span><p>Fixed regression where new association proxy system was still not proxying
hybrid attributes when they made use of the <code class="docutils literal notranslate"><span class="pre">&#64;hybrid_property.expression</span></code>
decorator to return an alternate SQL expression, or when the hybrid
returned an arbitrary <a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.interfaces.PropComparator" title="sqlalchemy.orm.interfaces.PropComparator"><code class="xref py py-class docutils literal notranslate"><span class="pre">PropComparator</span></code></a>, at the expression level.
This involved further generalization of the heuristics used to detect the
type of object being proxied at the level of <a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.attributes.QueryableAttribute" title="sqlalchemy.orm.attributes.QueryableAttribute"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueryableAttribute</span></code></a>,
to better detect if the descriptor ultimately serves mapped classes or
column expressions.</p>
<a class="changeset-link headerlink reference internal" href="#change-a4efe1aa09e4791c6800b91874f6f0fd">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4690">#4690</a></p>
</p>
</li>
<li><p id="change-1.3.4-2"><span class="target" id="change-c74d8a44a1f4588e657a125f1f89ab58"><strong>[orm] [bug] </strong></span><p>Applied the mapper “configure mutex” against the declarative class mapping
process, to guard against the race which can occur if mappers are used
while dynamic module import schemes are still in the process of configuring
mappers for related classes.  This does not guard against all possible race
conditions, such as if the concurrent import has not yet encountered the
dependent classes as of yet, however it guards against as much as possible
within the SQLAlchemy declarative process.</p>
<a class="changeset-link headerlink reference internal" href="#change-c74d8a44a1f4588e657a125f1f89ab58">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4686">#4686</a></p>
</p>
</li>
<li><p id="change-1.3.4-3"><span class="target" id="change-697d930ba034e0e742c6c208fac0d69e"><strong>[orm] [bug] </strong></span><p>A warning is now emitted for the case where a transient object is being
merged into the session with <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.merge" title="sqlalchemy.orm.session.Session.merge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.merge()</span></code></a> when that object is
already transient in the <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.   This warns for the case where
the object would normally be double-inserted.</p>
<a class="changeset-link headerlink reference internal" href="#change-697d930ba034e0e742c6c208fac0d69e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4647">#4647</a></p>
</p>
</li>
<li><p id="change-1.3.4-4"><span class="target" id="change-79c0b6da168627917c2e9bf4c567b936"><strong>[orm] [bug] </strong></span><p>Fixed regression in new relationship m2o comparison logic first introduced
at <a class="reference internal" href="migration_13.html#change-4359"><span class="std std-ref">Improvement to the behavior of many-to-one query expressions</span></a> when comparing to an attribute that is persisted as
NULL and is in an un-fetched state in the mapped instance.  Since the
attribute has no explicit default, it needs to default to NULL when
accessed in a persistent setting.</p>
<a class="changeset-link headerlink reference internal" href="#change-79c0b6da168627917c2e9bf4c567b936">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4676">#4676</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.4-engine">
<h3>engine<a class="headerlink" href="#change-1.3.4-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.4-5"><span class="target" id="change-72fb6e6d786b02c7498f1f5612bd22d6"><strong>[engine] [bug] [postgresql] </strong></span><p>Moved the “rollback” which occurs during dialect initialization so that it
occurs after additional dialect-specific initialize steps, in particular
those of the psycopg2 dialect which would inadvertently leave transactional
state on the first new connection, which could interfere with some
psycopg2-specific APIs which require that no transaction is started.  Pull
request courtesy Matthew Wilkes.</p>
<a class="changeset-link headerlink reference internal" href="#change-72fb6e6d786b02c7498f1f5612bd22d6">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4663">#4663</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.4-sql">
<h3>sql<a class="headerlink" href="#change-1.3.4-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.4-6"><span class="target" id="change-1a1f7679cfa113b0ed89624234b9b98f"><strong>[sql] [bug] </strong></span><p>Fixed that the <a class="reference internal" href="../core/functions.html#sqlalchemy.sql.functions.GenericFunction" title="sqlalchemy.sql.functions.GenericFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">GenericFunction</span></code></a> class was inadvertently
registering itself as one of the named functions.  Pull request courtesy
Adrien Berchet.</p>
<a class="changeset-link headerlink reference internal" href="#change-1a1f7679cfa113b0ed89624234b9b98f">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4653">#4653</a></p>
</p>
</li>
<li><p id="change-1.3.4-7"><span class="target" id="change-ef9fa4c1f80c1f24f6712380f75259d7"><strong>[sql] [bug] </strong></span><p>Fixed issue where double negation of a boolean column wouldn’t reset
the “NOT” operator.</p>
<a class="changeset-link headerlink reference internal" href="#change-ef9fa4c1f80c1f24f6712380f75259d7">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4618">#4618</a></p>
</p>
</li>
<li><p id="change-1.3.4-8"><span class="target" id="change-5192b6f7c963dd9e19f4b2ce8e4e221b"><strong>[sql] [bug] </strong></span><p>The <a class="reference internal" href="../core/functions.html#sqlalchemy.sql.functions.GenericFunction" title="sqlalchemy.sql.functions.GenericFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">GenericFunction</span></code></a> namespace is being migrated so that function
names are looked up in a case-insensitive manner, as SQL  functions do not
collide on case sensitive differences nor is this something which would
occur with user-defined functions or stored procedures.   Lookups for
functions declared with <a class="reference internal" href="../core/functions.html#sqlalchemy.sql.functions.GenericFunction" title="sqlalchemy.sql.functions.GenericFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">GenericFunction</span></code></a> now use a case
insensitive scheme,  however a deprecation case is supported which allows
two or more <a class="reference internal" href="../core/functions.html#sqlalchemy.sql.functions.GenericFunction" title="sqlalchemy.sql.functions.GenericFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">GenericFunction</span></code></a> objects with the same name of
different cases to exist, which will cause case sensitive lookups to occur
for that particular name, while emitting a warning at function registration
time.  Thanks to Adrien Berchet for a lot of work on this complicated
feature.</p>
<a class="changeset-link headerlink reference internal" href="#change-5192b6f7c963dd9e19f4b2ce8e4e221b">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4569">#4569</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.4-postgresql">
<h3>postgresql<a class="headerlink" href="#change-1.3.4-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.4-9"><span class="target" id="change-4400e3621b39ee13ffe8445d4fa6e285"><strong>[postgresql] [bug] [orm] </strong></span><p>Fixed an issue where the “number of rows matched” warning would emit even if
the dialect reported “supports_sane_multi_rowcount=False”, as is the case
for psycogp2 with <code class="docutils literal notranslate"><span class="pre">use_batch_mode=True</span></code> and others.</p>
<a class="changeset-link headerlink reference internal" href="#change-4400e3621b39ee13ffe8445d4fa6e285">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4661">#4661</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.4-mysql">
<h3>mysql<a class="headerlink" href="#change-1.3.4-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.4-10"><span class="target" id="change-b09b087026f5143acfb39e9c6b4f3cf0"><strong>[mysql] [bug] </strong></span><p>Added support for DROP CHECK constraint which is required by MySQL 8.0.16
to drop a CHECK constraint; MariaDB supports plain DROP CONSTRAINT.  The
logic distinguishes between the two syntaxes by checking the server version
string for MariaDB presence.    Alembic migrations has already worked
around this issue by implementing its own DROP for MySQL / MariaDB CHECK
constraints, however this change implements it straight in Core so that its
available for general use.   Pull request courtesy Hannes Hansen.</p>
<a class="changeset-link headerlink reference internal" href="#change-b09b087026f5143acfb39e9c6b4f3cf0">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4650">#4650</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.4-mssql">
<h3>mssql<a class="headerlink" href="#change-1.3.4-mssql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.4-11"><span class="target" id="change-cd65f06e64aa7517e3b2be57063a2407"><strong>[mssql] [feature] </strong></span><p>Added support for SQL Server filtered indexes, via the <code class="docutils literal notranslate"><span class="pre">mssql_where</span></code>
parameter which works similarly to that of the <code class="docutils literal notranslate"><span class="pre">postgresql_where</span></code> index
function in the PostgreSQL dialect.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../dialects/mssql.html#mssql-index-where"><span class="std std-ref">Filtered Indexes</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-cd65f06e64aa7517e3b2be57063a2407">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4657">#4657</a></p>
</p>
</li>
<li><p id="change-1.3.4-12"><span class="target" id="change-1ff2af502f01bc791808a73ca2036237"><strong>[mssql] [bug] </strong></span><p>Added error code 20047 to “is_disconnect” for pymssql.  Pull request
courtesy Jon Schuff.</p>
<a class="changeset-link headerlink reference internal" href="#change-1ff2af502f01bc791808a73ca2036237">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4680">#4680</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.4-misc">
<h3>misc<a class="headerlink" href="#change-1.3.4-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.4-13"><span class="target" id="change-318646b05cd537379c6b01d5e4b40f38"><strong>[misc] [bug] </strong></span><p>Removed errant “sqla_nose.py” symbol from MANIFEST.in which created an
undesirable warning message.</p>
<a class="changeset-link headerlink reference internal" href="#change-318646b05cd537379c6b01d5e4b40f38">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4625">#4625</a></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-1.3.3">
<h2>1.3.3<a class="headerlink" href="#change-1.3.3" title="Permalink to this headline">¶</a></h2>
Released: April 15, 2019<div class="section" id="change-1.3.3-orm">
<h3>orm<a class="headerlink" href="#change-1.3.3-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.3-0"><span class="target" id="change-0ef2df514d4d40ea01d9b62a9c5fdae1"><strong>[orm] [bug] </strong></span><p>Fixed 1.3 regression in new “ambiguous FROMs” query logic introduced in
<a class="reference internal" href="migration_13.html#change-4365"><span class="std std-ref">Query.join() handles ambiguity in deciding the “left” side more explicitly</span></a> where a <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> that explicitly places an entity
in the FROM clause with <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.select_from" title="sqlalchemy.orm.query.Query.select_from"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.select_from()</span></code></a> and also joins to it
using <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.join()</span></code></a> would later cause an “ambiguous FROM” error if
that entity were used in additional joins, as the entity appears twice in
the “from” list of the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a>.  The fix resolves this ambiguity by
folding the standalone entity into the join that it’s already a part of in
the same way that ultimately happens when the SELECT statement is rendered.</p>
<a class="changeset-link headerlink reference internal" href="#change-0ef2df514d4d40ea01d9b62a9c5fdae1">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4584">#4584</a></p>
</p>
</li>
<li><p id="change-1.3.3-1"><span class="target" id="change-6539bd0d116fc849738e24441b79595a"><strong>[orm] [bug] </strong></span><p>Adjusted the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.filter_by" title="sqlalchemy.orm.query.Query.filter_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.filter_by()</span></code></a> method to not call <code class="xref py py-func docutils literal notranslate"><span class="pre">and()</span></code>
internally against multiple criteria, instead passing it off to
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.filter" title="sqlalchemy.orm.query.Query.filter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.filter()</span></code></a> as a series of criteria, instead of a single criteria.
This allows <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.filter_by" title="sqlalchemy.orm.query.Query.filter_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.filter_by()</span></code></a> to defer to <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.filter" title="sqlalchemy.orm.query.Query.filter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.filter()</span></code></a>’s
treatment of variable numbers of clauses, including the case where the list
is empty.  In this case, the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> object will not have a
<code class="docutils literal notranslate"><span class="pre">.whereclause</span></code>, which allows subsequent “no whereclause” methods like
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.select_from" title="sqlalchemy.orm.query.Query.select_from"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.select_from()</span></code></a> to behave consistently.</p>
<a class="changeset-link headerlink reference internal" href="#change-6539bd0d116fc849738e24441b79595a">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4606">#4606</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.3-postgresql">
<h3>postgresql<a class="headerlink" href="#change-1.3.3-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.3-2"><span class="target" id="change-85c41a11787cfd9557572eeca3443c22"><strong>[postgresql] [bug] </strong></span><p>Fixed regression from release 1.3.2 caused by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4562">#4562</a> where a URL
that contained only a query string and no hostname, such as for the
purposes of specifying a service file with connection information, would no
longer be propagated to psycopg2 properly.   The change in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4562">#4562</a>
has been adjusted to further suit psycopg2’s exact requirements, which is
that if there are any connection parameters whatsoever, the “dsn” parameter
is no longer required, so in this case the query string parameters are
passed alone.</p>
<a class="changeset-link headerlink reference internal" href="#change-85c41a11787cfd9557572eeca3443c22">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4601">#4601</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.3-mssql">
<h3>mssql<a class="headerlink" href="#change-1.3.3-mssql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.3-3"><span class="target" id="change-3c0205a6f066ae773c8f41750a6451de"><strong>[mssql] [bug] </strong></span><p>Fixed issue in SQL Server dialect where if a bound parameter were present in
an ORDER BY expression that would ultimately not be rendered in the SQL
Server version of the statement, the parameters would still be part of the
execution parameters, leading to DBAPI-level errors.  Pull request courtesy
Matt Lewellyn.</p>
<a class="changeset-link headerlink reference internal" href="#change-3c0205a6f066ae773c8f41750a6451de">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4587">#4587</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.3-misc">
<h3>misc<a class="headerlink" href="#change-1.3.3-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.3-4"><span class="target" id="change-bd3ad321f22504d6f4718418eee910bf"><strong>[bug] [pool] </strong></span><p>Fixed behavioral regression as a result of deprecating the “use_threadlocal”
flag for <a class="reference internal" href="../core/pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a>, where the <a class="reference internal" href="../core/pooling.html#sqlalchemy.pool.SingletonThreadPool" title="sqlalchemy.pool.SingletonThreadPool"><code class="xref py py-class docutils literal notranslate"><span class="pre">SingletonThreadPool</span></code></a> no longer
makes use of this option which causes the “rollback on return” logic to take
place when the same <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> is used multiple times in the context
of a transaction to connect or implicitly execute, thereby cancelling the
transaction.   While this is not the recommended way to work with engines
and connections, it is nonetheless a confusing behavioral change as when
using <a class="reference internal" href="../core/pooling.html#sqlalchemy.pool.SingletonThreadPool" title="sqlalchemy.pool.SingletonThreadPool"><code class="xref py py-class docutils literal notranslate"><span class="pre">SingletonThreadPool</span></code></a>, the transaction should stay open
regardless of what else is done with the same engine in the same thread.
The <code class="docutils literal notranslate"><span class="pre">use_threadlocal</span></code> flag remains deprecated however the
<a class="reference internal" href="../core/pooling.html#sqlalchemy.pool.SingletonThreadPool" title="sqlalchemy.pool.SingletonThreadPool"><code class="xref py py-class docutils literal notranslate"><span class="pre">SingletonThreadPool</span></code></a> now implements its own version of the same
logic.</p>
<a class="changeset-link headerlink reference internal" href="#change-bd3ad321f22504d6f4718418eee910bf">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4585">#4585</a></p>
</p>
</li>
<li><p id="change-1.3.3-5"><span class="target" id="change-56ad28f66664deb283c67750ebe28cae"><strong>[bug] [ext] </strong></span><p>Fixed bug where using <code class="docutils literal notranslate"><span class="pre">copy.copy()</span></code> or <code class="docutils literal notranslate"><span class="pre">copy.deepcopy()</span></code> on
<a class="reference internal" href="../orm/extensions/mutable.html#sqlalchemy.ext.mutable.MutableList" title="sqlalchemy.ext.mutable.MutableList"><code class="xref py py-class docutils literal notranslate"><span class="pre">MutableList</span></code></a> would cause the items within the list to be
duplicated, due to an inconsistency in how Python pickle and copy both make
use of <code class="docutils literal notranslate"><span class="pre">__getstate__()</span></code> and <code class="docutils literal notranslate"><span class="pre">__setstate__()</span></code> regarding lists.  In order
to resolve, a <code class="docutils literal notranslate"><span class="pre">__reduce_ex__</span></code> method had to be added to
<a class="reference internal" href="../orm/extensions/mutable.html#sqlalchemy.ext.mutable.MutableList" title="sqlalchemy.ext.mutable.MutableList"><code class="xref py py-class docutils literal notranslate"><span class="pre">MutableList</span></code></a>.  In order to maintain backwards compatibility with
existing pickles based on <code class="docutils literal notranslate"><span class="pre">__getstate__()</span></code>, the <code class="docutils literal notranslate"><span class="pre">__setstate__()</span></code> method
remains as well; the test suite asserts that pickles made against the old
version of the class can still be deserialized by the pickle module.</p>
<a class="changeset-link headerlink reference internal" href="#change-56ad28f66664deb283c67750ebe28cae">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4603">#4603</a></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-1.3.2">
<h2>1.3.2<a class="headerlink" href="#change-1.3.2" title="Permalink to this headline">¶</a></h2>
Released: April 2, 2019<div class="section" id="change-1.3.2-orm">
<h3>orm<a class="headerlink" href="#change-1.3.2-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.2-0"><span class="target" id="change-3fea31ddd29487f5f164d2d77ad80603"><strong>[orm] [bug] [ext] </strong></span><p>Restored instance-level support for plain Python descriptors, e.g.
<code class="docutils literal notranslate"><span class="pre">&#64;property</span></code> objects, in conjunction with association proxies, in that if
the proxied object is not within ORM scope at all, it gets classified as
“ambiguous” but is proxed directly.  For class level access, a basic class
level``__get__()`` now returns the
<code class="xref py py-class docutils literal notranslate"><span class="pre">AmbiguousAssociationProxyInstance</span></code> directly, rather than raising
its exception, which is the closest approximation to the previous behavior
that returned the <a class="reference internal" href="../orm/extensions/associationproxy.html#sqlalchemy.ext.associationproxy.AssociationProxy" title="sqlalchemy.ext.associationproxy.AssociationProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">AssociationProxy</span></code></a> itself that’s possible.  Also
improved the stringification of these objects to be more descriptive of
current state.</p>
<a class="changeset-link headerlink reference internal" href="#change-3fea31ddd29487f5f164d2d77ad80603">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4573">#4573</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4574">#4574</a></p>
</p>
</li>
<li><p id="change-1.3.2-1"><span class="target" id="change-782a2b34df7b44a1e5aca2a74f9d536c"><strong>[orm] [bug] </strong></span><p>Fixed bug where use of <a class="reference internal" href="../orm/inheritance_loading.html#sqlalchemy.orm.with_polymorphic" title="sqlalchemy.orm.with_polymorphic"><code class="xref py py-func docutils literal notranslate"><span class="pre">with_polymorphic()</span></code></a> or other aliased construct
would not properly adapt when the aliased target were used as the
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.correlate_except" title="sqlalchemy.sql.expression.Select.correlate_except"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.correlate_except()</span></code></a> target of a subquery used inside of a
<a class="reference internal" href="../orm/mapping_columns.html#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code></a>. This required a fix to the clause adaption
mechanics to properly handle a selectable that shows up in the “correlate
except” list, in a similar manner as which occurs for selectables that show
up in the “correlate” list.  This is ultimately a fairly fundamental bug
that has lasted for a long time but it is hard to come across it.</p>
<a class="changeset-link headerlink reference internal" href="#change-782a2b34df7b44a1e5aca2a74f9d536c">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4537">#4537</a></p>
</p>
</li>
<li><p id="change-1.3.2-2"><span class="target" id="change-e7295dd963e9034cbad550c2fb659f45"><strong>[orm] [bug] </strong></span><p>Fixed regression where a new error message that was supposed to raise when
attempting to link a relationship option to an AliasedClass without using
<a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.interfaces.PropComparator.of_type" title="sqlalchemy.orm.interfaces.PropComparator.of_type"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PropComparator.of_type()</span></code></a> would instead raise an <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>.
Note that in 1.3, it is no longer valid to create an option path from a
plain mapper relationship to an <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.util.AliasedClass" title="sqlalchemy.orm.util.AliasedClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">AliasedClass</span></code></a> without using
<a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.interfaces.PropComparator.of_type" title="sqlalchemy.orm.interfaces.PropComparator.of_type"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PropComparator.of_type()</span></code></a>.</p>
<a class="changeset-link headerlink reference internal" href="#change-e7295dd963e9034cbad550c2fb659f45">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4566">#4566</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.2-sql">
<h3>sql<a class="headerlink" href="#change-1.3.2-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.2-3"><span class="target" id="change-33e14205571c0d7746a46b88bb9717fd"><strong>[sql] [bug] [documentation] </strong></span><p>Thanks to <a class="reference internal" href="migration_13.html#change-3981"><span class="std std-ref">TypeEngine methods bind_expression, column_expression work with Variant, type-specific types</span></a>, we no longer need to rely on recipes that
subclass dialect-specific types directly, <a class="reference internal" href="../core/custom_types.html#sqlalchemy.types.TypeDecorator" title="sqlalchemy.types.TypeDecorator"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code></a> can now
handle all cases.   Additionally, the above change made it slightly less
likely that a direct subclass of a base SQLAlchemy type would work as
expected, which could be misleading.  Documentation has been updated to use
<a class="reference internal" href="../core/custom_types.html#sqlalchemy.types.TypeDecorator" title="sqlalchemy.types.TypeDecorator"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code></a> for these examples including the PostgreSQL
“ArrayOfEnum” example datatype and direct support for the “subclass a type
directly” has been removed.</p>
<a class="changeset-link headerlink reference internal" href="#change-33e14205571c0d7746a46b88bb9717fd">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4580">#4580</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.2-postgresql">
<h3>postgresql<a class="headerlink" href="#change-1.3.2-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.2-4"><span class="target" id="change-f5315b482fc3d0f2ec88daa2f010684f"><strong>[postgresql] [feature] </strong></span><p>Added support for parameter-less connection URLs for the psycopg2 dialect,
meaning, the URL can be passed to <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> as
<code class="docutils literal notranslate"><span class="pre">&quot;postgresql+psycopg2://&quot;</span></code> with no additional arguments to indicate an
empty DSN passed to libpq, which indicates to connect to “localhost” with
no username, password, or database given. Pull request courtesy Julian
Mehnle.</p>
<a class="changeset-link headerlink reference internal" href="#change-f5315b482fc3d0f2ec88daa2f010684f">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4562">#4562</a></p>
</p>
</li>
<li><p id="change-1.3.2-5"><span class="target" id="change-4ed436b64a29a95f3993b18e66e34bc0"><strong>[postgresql] [bug] </strong></span><p>Modified the <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.with_for_update.params.of" title="sqlalchemy.sql.expression.Select.with_for_update"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Select.with_for_update.of</span></code></a> parameter so that if a
join or other composed selectable is passed, the individual <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
objects will be filtered from it, allowing one to pass a join() object to
the parameter, as occurs normally when using joined table inheritance with
the ORM.  Pull request courtesy Raymond Lu.</p>
<a class="changeset-link headerlink reference internal" href="#change-4ed436b64a29a95f3993b18e66e34bc0">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4550">#4550</a></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-1.3.1">
<h2>1.3.1<a class="headerlink" href="#change-1.3.1" title="Permalink to this headline">¶</a></h2>
Released: March 9, 2019<div class="section" id="change-1.3.1-orm">
<h3>orm<a class="headerlink" href="#change-1.3.1-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.1-0"><span class="target" id="change-bb2cb9d2332fa1bd029f6bc3f365303e"><strong>[orm] [bug] [ext] </strong></span><p>Fixed regression where an association proxy linked to a synonym would no
longer work, both at instance level and at class level.</p>
<a class="changeset-link headerlink reference internal" href="#change-bb2cb9d2332fa1bd029f6bc3f365303e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4522">#4522</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.1-mssql">
<h3>mssql<a class="headerlink" href="#change-1.3.1-mssql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.1-1"><span class="target" id="change-4bfabd228e99f4e50dbc2320ecda40f7"><strong>[mssql] [bug] </strong></span><p>A commit() is emitted after an isolation level change to SNAPSHOT, as both
pyodbc and pymssql open an implicit transaction which blocks subsequent SQL
from being emitted in the current transaction.</p>
<a class="changeset-link headerlink reference internal" href="#change-4bfabd228e99f4e50dbc2320ecda40f7">¶</a><p>This change is also <strong>backported</strong> to: 1.2.19</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4536">#4536</a></p>
</p>
</li>
<li><p id="change-1.3.1-2"><span class="target" id="change-9f6073d7d38d609acd14d89b92ccec5c"><strong>[mssql] [bug] </strong></span><p>Fixed regression in SQL Server reflection due to <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4393">#4393</a> where the
removal of open-ended <code class="docutils literal notranslate"><span class="pre">**kw</span></code> from the <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a> datatype caused
reflection of this type to fail due to a “scale” argument being passed.</p>
<a class="changeset-link headerlink reference internal" href="#change-9f6073d7d38d609acd14d89b92ccec5c">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4525">#4525</a></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-1.3.0">
<h2>1.3.0<a class="headerlink" href="#change-1.3.0" title="Permalink to this headline">¶</a></h2>
Released: March 4, 2019<div class="section" id="change-1.3.0-orm">
<h3>orm<a class="headerlink" href="#change-1.3.0-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0-0"><span class="target" id="change-9318d41138de43df43dbf845d075c092"><strong>[orm] [feature] </strong></span><p>The <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.get" title="sqlalchemy.orm.query.Query.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.get()</span></code></a> method can now accept a dictionary of attribute keys
and values as a means of indicating the primary key value to load; is
particularly useful for composite primary keys.  Pull request courtesy
Sanjana S.</p>
<a class="changeset-link headerlink reference internal" href="#change-9318d41138de43df43dbf845d075c092">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4316">#4316</a></p>
</p>
</li>
<li><p id="change-1.3.0-1"><span class="target" id="change-d6a4de873a904452c25ab365ad777e73"><strong>[orm] [feature] </strong></span><p>A SQL expression can now be assigned to a primary key attribute for an ORM
flush in the same manner as ordinary attributes as described in
<a class="reference internal" href="../orm/persistence_techniques.html#flush-embedded-sql-expressions"><span class="std std-ref">Embedding SQL Insert/Update Expressions into a Flush</span></a> where the expression will be evaulated
and then returned to the ORM using RETURNING, or in the case of pysqlite,
works using the cursor.lastrowid attribute.Requires either a database that
supports RETURNING (e.g. Postgresql, Oracle, SQL Server) or pysqlite.</p>
<a class="changeset-link headerlink reference internal" href="#change-d6a4de873a904452c25ab365ad777e73">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3133">#3133</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0-engine">
<h3>engine<a class="headerlink" href="#change-1.3.0-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0-2"><span class="target" id="change-20c3de1ba4832c1a2fd44a092656b9ef"><strong>[engine] [feature] </strong></span><p>Revised the formatting for <a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.StatementError" title="sqlalchemy.exc.StatementError"><code class="xref py py-class docutils literal notranslate"><span class="pre">StatementError</span></code></a> when stringified. Each
error detail is broken up over multiple newlines instead of spaced out on a
single line.  Additionally, the SQL representation now stringifies the SQL
statement rather than using <code class="docutils literal notranslate"><span class="pre">repr()</span></code>, so that newlines are rendered as is.
Pull request courtesy Nate Clark.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4500"><span class="std std-ref">Changed StatementError formatting (newlines and %s)</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-20c3de1ba4832c1a2fd44a092656b9ef">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4500">#4500</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0-sql">
<h3>sql<a class="headerlink" href="#change-1.3.0-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0-3"><span class="target" id="change-369f705ea57081237d4a2106a01966f6"><strong>[sql] [bug] </strong></span><p>The <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Alias" title="sqlalchemy.sql.expression.Alias"><code class="xref py py-class docutils literal notranslate"><span class="pre">Alias</span></code></a> class and related subclasses <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.CTE" title="sqlalchemy.sql.expression.CTE"><code class="xref py py-class docutils literal notranslate"><span class="pre">CTE</span></code></a>,
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Lateral" title="sqlalchemy.sql.expression.Lateral"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lateral</span></code></a> and <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.TableSample" title="sqlalchemy.sql.expression.TableSample"><code class="xref py py-class docutils literal notranslate"><span class="pre">TableSample</span></code></a> have been reworked so that it is
not possible for a user to construct the objects directly.  These constructs
require that the standalone construction function or selectable-bound method
be used to instantiate new objects.</p>
<a class="changeset-link headerlink reference internal" href="#change-369f705ea57081237d4a2106a01966f6">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4509">#4509</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0-schema">
<h3>schema<a class="headerlink" href="#change-1.3.0-schema" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0-4"><span class="target" id="change-64ac776996da1a5c3e3460b4c0f0b257"><strong>[schema] [feature] </strong></span><p>Added new parameters <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.params.resolve_fks" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.resolve_fks</span></code></a> and
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData.reflect.params.resolve_fks" title="sqlalchemy.schema.MetaData.reflect"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">MetaData.reflect.resolve_fks</span></code></a> which when set to False will
disable the automatic reflection of related tables encountered in
<a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> objects, which can both reduce SQL overhead for omitted
tables as well as avoid tables that can’t be reflected for database-specific
reasons.  Two <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects present in the same <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>
collection can still refer to each other even if the reflection of the two
tables occurred separately.</p>
<a class="changeset-link headerlink reference internal" href="#change-64ac776996da1a5c3e3460b4c0f0b257">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4517">#4517</a></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-1.3.0b3">
<h2>1.3.0b3<a class="headerlink" href="#change-1.3.0b3" title="Permalink to this headline">¶</a></h2>
Released: February 8, 2019<div class="section" id="change-1.3.0b3-orm">
<h3>orm<a class="headerlink" href="#change-1.3.0b3-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b3-0"><span class="target" id="change-9824ef7ff64a049136769ccf353ec7b3"><strong>[orm] [bug] </strong></span><p>Improved the behavior of <a class="reference internal" href="../orm/inheritance_loading.html#sqlalchemy.orm.with_polymorphic" title="sqlalchemy.orm.with_polymorphic"><code class="xref py py-func docutils literal notranslate"><span class="pre">orm.with_polymorphic()</span></code></a> in conjunction with
loader options, in particular wildcard operations as well as
<a class="reference internal" href="../orm/loading_columns.html#sqlalchemy.orm.load_only" title="sqlalchemy.orm.load_only"><code class="xref py py-func docutils literal notranslate"><span class="pre">orm.load_only()</span></code></a>.  The polymorphic object will be more accurately
targeted so that column-level options on the entity will correctly take
effect.The issue is a continuation of the same kinds of things fixed in
<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4468">#4468</a>.</p>
<a class="changeset-link headerlink reference internal" href="#change-9824ef7ff64a049136769ccf353ec7b3">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4469">#4469</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0b3-orm-declarative">
<h3>orm declarative<a class="headerlink" href="#change-1.3.0b3-orm-declarative" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b3-1"><span class="target" id="change-e9cdb733b3e1ecf9c994e540d7366733"><strong>[bug] [declarative] [orm] </strong></span><p>Added some helper exceptions that invoke when a mapping based on
<a class="reference internal" href="../orm/extensions/declarative/api.html#sqlalchemy.ext.declarative.AbstractConcreteBase" title="sqlalchemy.ext.declarative.AbstractConcreteBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractConcreteBase</span></code></a>, <a class="reference internal" href="../orm/extensions/declarative/api.html#sqlalchemy.ext.declarative.DeferredReflection" title="sqlalchemy.ext.declarative.DeferredReflection"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeferredReflection</span></code></a>, or
<code class="xref py py-class docutils literal notranslate"><span class="pre">AutoMap</span></code> is used before the mapping is ready to be used, which
contain descriptive information on the class, rather than falling through
into other failure modes that are less informative.</p>
<a class="changeset-link headerlink reference internal" href="#change-e9cdb733b3e1ecf9c994e540d7366733">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4470">#4470</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0b3-sql">
<h3>sql<a class="headerlink" href="#change-1.3.0b3-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b3-2"><span class="target" id="change-096e1e64a6a2c7ad62313c83506341a3"><strong>[sql] [bug] </strong></span><p>Fully removed the behavior of strings passed directly as components of a
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a> or <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> object being coerced to <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a>
constructs automatically; the warning that has been emitted is now an
ArgumentError or in the case of order_by() / group_by() a CompileError.
This has emitted a warning since version 1.0 however its presence continues
to create concerns for the potential of mis-use of this behavior.</p>
<p>Note that public CVEs have been posted for order_by() / group_by() which
are resolved by this commit:  CVE-2019-7164  CVE-2019-7548</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4481"><span class="std std-ref">Coercion of string SQL fragments to text() fully removed</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-096e1e64a6a2c7ad62313c83506341a3">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4481">#4481</a></p>
</p>
</li>
<li><p id="change-1.3.0b3-3"><span class="target" id="change-2da08b51a38dcb9b9335b7c427b5c33d"><strong>[sql] [bug] </strong></span><p>Quoting is applied to <a class="reference internal" href="../core/functions.html#sqlalchemy.sql.functions.Function" title="sqlalchemy.sql.functions.Function"><code class="xref py py-class docutils literal notranslate"><span class="pre">Function</span></code></a> names, those which are usually but
not necessarily generated from the <code class="xref py py-attr docutils literal notranslate"><span class="pre">sql.func</span></code> construct,  at compile
time if they contain illegal characters, such as spaces or punctuation. The
names are as before treated as case insensitive however, meaning if the
names contain uppercase or mixed case characters, that alone does not
trigger quoting. The case insensitivity is currently maintained for
backwards compatibility.</p>
<a class="changeset-link headerlink reference internal" href="#change-2da08b51a38dcb9b9335b7c427b5c33d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4467">#4467</a></p>
</p>
</li>
<li><p id="change-1.3.0b3-4"><span class="target" id="change-6f9078780a4e13f9da4579ba3037cb2c"><strong>[sql] [bug] </strong></span><p>Added “SQL phrase validation” to key DDL phrases that are accepted as plain
strings, including <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKeyConstraint.params.on_delete" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ForeignKeyConstraint.on_delete</span></code></a>,
<a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKeyConstraint.params.on_update" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ForeignKeyConstraint.on_update</span></code></a>,
<a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.ExcludeConstraint.params.using" title="sqlalchemy.dialects.postgresql.ExcludeConstraint"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ExcludeConstraint.using</span></code></a>,
<a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKeyConstraint.params.initially" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ForeignKeyConstraint.initially</span></code></a>, for areas where a series of SQL
keywords only are expected.Any non-space characters that suggest the phrase
would need to be quoted will raise a <a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.CompileError" title="sqlalchemy.exc.CompileError"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompileError</span></code></a>.   This change
is related to the series of changes committed as part of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4481">#4481</a>.</p>
<a class="changeset-link headerlink reference internal" href="#change-6f9078780a4e13f9da4579ba3037cb2c">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4481">#4481</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0b3-postgresql">
<h3>postgresql<a class="headerlink" href="#change-1.3.0b3-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b3-5"><span class="target" id="change-d60777a86906baffe2c58f261906613f"><strong>[postgresql] [bug] </strong></span><p>Fixed issue where using an uppercase name for an index type (e.g. GIST,
BTREE, etc. ) or an EXCLUDE constraint would treat it as an identifier to
be quoted, rather than rendering it as is. The new behavior converts these
types to lowercase and ensures they contain only valid SQL characters.</p>
<a class="changeset-link headerlink reference internal" href="#change-d60777a86906baffe2c58f261906613f">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4473">#4473</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0b3-misc">
<h3>misc<a class="headerlink" href="#change-1.3.0b3-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b3-6"><span class="target" id="change-11e958da2343b2aa4f78610a74d5fe2f"><strong>[bug] [ext] </strong></span><p>Implemented a more comprehensive assignment operation (e.g. “bulk replace”)
when using association proxy with sets or dictionaries.  Fixes the problem
of redundant proxy objects being created to replace the old ones, which
leads to excessive events and SQL and in the case of unique constraints
will cause the flush to fail.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-2642"><span class="std std-ref">Implemented bulk replace for sets, dicts with AssociationProxy</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-11e958da2343b2aa4f78610a74d5fe2f">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2642">#2642</a></p>
</p>
</li>
<li><p id="change-1.3.0b3-7"><span class="target" id="change-ea33e18bbba6450980840d4e8c2874a7"><strong>[change] [tests] </strong></span><p>The test system has removed support for Nose, which is unmaintained for
several years and is producing warnings under Python 3. The test suite is
currently standardized on Pytest.  Pull request courtesy Parth Shandilya.</p>
<a class="changeset-link headerlink reference internal" href="#change-ea33e18bbba6450980840d4e8c2874a7">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4460">#4460</a></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-1.3.0b2">
<h2>1.3.0b2<a class="headerlink" href="#change-1.3.0b2" title="Permalink to this headline">¶</a></h2>
Released: January 25, 2019<div class="section" id="change-1.3.0b2-general">
<h3>general<a class="headerlink" href="#change-1.3.0b2-general" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b2-0"><span class="target" id="change-823251756ce0c54ec326a4f53bae7d37"><strong>[general] [change] </strong></span><p>A large change throughout the library has ensured that all objects,
parameters, and behaviors which have been noted as deprecated or legacy now
emit <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> warnings when invoked.As the Python 3
interpreter now defaults to displaying deprecation warnings, as well as that
modern test suites based on tools like tox and pytest tend to display
deprecation warnings, this change should make it easier to note what API
features are obsolete. A major rationale for this change is so that long-
deprecated features that nonetheless still see continue to see real world
use can  finally be removed in the near future; the biggest example of this
are the <a class="reference internal" href="../orm/deprecated.html#sqlalchemy.orm.interfaces.SessionExtension" title="sqlalchemy.orm.interfaces.SessionExtension"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionExtension</span></code></a> and <a class="reference internal" href="../orm/deprecated.html#sqlalchemy.orm.interfaces.MapperExtension" title="sqlalchemy.orm.interfaces.MapperExtension"><code class="xref py py-class docutils literal notranslate"><span class="pre">MapperExtension</span></code></a> classes as
well as a handful of other pre-event extension hooks, which have been
deprecated since version 0.7 but still remain in the library.  Another is
that several major longstanding behaviors are to be deprecated as well,
including the threadlocal engine strategy, the convert_unicode flag, and non
primary mappers.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4393-general"><span class="std std-ref">Deprecation warnings are emitted for all deprecated elements; new deprecations added</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-823251756ce0c54ec326a4f53bae7d37">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4393">#4393</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0b2-orm">
<h3>orm<a class="headerlink" href="#change-1.3.0b2-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b2-1"><span class="target" id="change-6c6af33a3cb496179dc2f6cbc80deb14"><strong>[orm] [feature] </strong></span><p>Implemented a new feature whereby the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.util.AliasedClass" title="sqlalchemy.orm.util.AliasedClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">AliasedClass</span></code></a> construct can
now be used as the target of a <a class="reference internal" href="../orm/relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>.  This allows the
concept of “non primary mappers” to no longer be necessary, as the
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.util.AliasedClass" title="sqlalchemy.orm.util.AliasedClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">AliasedClass</span></code></a> is much easier to configure and automatically inherits
all the relationships of the mapped class, as well as preserves the
ability for loader options to work normally.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4423"><span class="std std-ref">Relationship to AliasedClass replaces the need for non primary mappers</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-6c6af33a3cb496179dc2f6cbc80deb14">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4423">#4423</a></p>
</p>
</li>
<li><p id="change-1.3.0b2-2"><span class="target" id="change-985b6ac7e8291e905e5881009eeed1bf"><strong>[orm] [feature] </strong></span><p>Added new <a class="reference internal" href="../orm/events.html#sqlalchemy.orm.events.MapperEvents.before_mapper_configured" title="sqlalchemy.orm.events.MapperEvents.before_mapper_configured"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MapperEvents.before_mapper_configured()</span></code></a> event.   This
event complements the other “configure” stage mapper events with a per
mapper event that receives each <a class="reference internal" href="../orm/mapping_api.html#sqlalchemy.orm.mapper.Mapper" title="sqlalchemy.orm.mapper.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> right before its
configure step, and additionally may be used to prevent or delay the
configuration of specific <a class="reference internal" href="../orm/mapping_api.html#sqlalchemy.orm.mapper.Mapper" title="sqlalchemy.orm.mapper.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> objects using a new
return value <code class="xref py py-attr docutils literal notranslate"><span class="pre">orm.interfaces.EXT_SKIP</span></code>.  See the
documentation link for an example.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../orm/events.html#sqlalchemy.orm.events.MapperEvents.before_mapper_configured" title="sqlalchemy.orm.events.MapperEvents.before_mapper_configured"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MapperEvents.before_mapper_configured()</span></code></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-985b6ac7e8291e905e5881009eeed1bf">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4397">#4397</a></p>
</p>
</li>
<li><p id="change-1.3.0b2-3"><span class="target" id="change-93b931b84e834f1631c8fd4f2e956af6"><strong>[orm] [bug] </strong></span><p>Fixed long-standing issue where duplicate collection members would cause a
backref to delete the association between the member and its parent object
when one of the duplicates were removed, as occurs as a side effect of
swapping two objects in one statement.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-1103"><span class="std std-ref">Many-to-one backref checks for collection duplicates during remove operation</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-93b931b84e834f1631c8fd4f2e956af6">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1103">#1103</a></p>
</p>
</li>
<li><p id="change-1.3.0b2-4"><span class="target" id="change-5952a958e33dc98bd5740b8db114463b"><strong>[orm] [bug] </strong></span><p>Extended the fix first made as part of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3287">#3287</a>, where a loader option
made against a subclass using a wildcard would extend itself to include
application of the wildcard to attributes on the super classes as well, to a
“bound” loader option as well, e.g. in an expression like
<code class="docutils literal notranslate"><span class="pre">Load(SomeSubClass).load_only('foo')</span></code>.  Columns that are part of the
parent class of <code class="docutils literal notranslate"><span class="pre">SomeSubClass</span></code> will also be excluded in the same way as if
the unbound option <code class="docutils literal notranslate"><span class="pre">load_only('foo')</span></code> were used.</p>
<a class="changeset-link headerlink reference internal" href="#change-5952a958e33dc98bd5740b8db114463b">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4373">#4373</a></p>
</p>
</li>
<li><p id="change-1.3.0b2-5"><span class="target" id="change-06bb19987596baf9c8e09fab0780a264"><strong>[orm] [bug] </strong></span><p>Improved error messages emitted by the ORM in the area of loader option
traversal.  This includes early detection of mis-matched loader strategies
along with a clearer explanation why these strategies don’t match.</p>
<a class="changeset-link headerlink reference internal" href="#change-06bb19987596baf9c8e09fab0780a264">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4433">#4433</a></p>
</p>
</li>
<li><p id="change-1.3.0b2-6"><span class="target" id="change-a96f862c4415770a1b41ea60f51fd80d"><strong>[orm] [bug] </strong></span><p>The “remove” event for collections is now called before the item is removed
in the case of the <code class="docutils literal notranslate"><span class="pre">collection.remove()</span></code> method, as is consistent with the
behavior for most other forms of collection item removal (such as
<code class="docutils literal notranslate"><span class="pre">__delitem__</span></code>, replacement under <code class="docutils literal notranslate"><span class="pre">__setitem__</span></code>).  For <code class="docutils literal notranslate"><span class="pre">pop()</span></code> methods,
the remove event still fires after the operation.</p>
<a class="changeset-link headerlink reference internal" href="#change-a96f862c4415770a1b41ea60f51fd80d">¶</a><p></p>
</p>
</li>
<li><p id="change-1.3.0b2-7"><span class="target" id="change-afad6c1bde8bd7f2c60ed840227d8020"><strong>[orm] [bug] [engine] </strong></span><p>Added accessors for execution options to Core and ORM, via
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.get_execution_options" title="sqlalchemy.orm.query.Query.get_execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.get_execution_options()</span></code></a>,
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.get_execution_options" title="sqlalchemy.engine.Connection.get_execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_execution_options()</span></code></a>,
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine.get_execution_options" title="sqlalchemy.engine.Engine.get_execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.get_execution_options()</span></code></a>, and
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Executable.get_execution_options" title="sqlalchemy.sql.expression.Executable.get_execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Executable.get_execution_options()</span></code></a>.  PR courtesy Daniel Lister.</p>
<a class="changeset-link headerlink reference internal" href="#change-afad6c1bde8bd7f2c60ed840227d8020">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4464">#4464</a></p>
</p>
</li>
<li><p id="change-1.3.0b2-8"><span class="target" id="change-d2b955e8847391cb31690d7bf292ad08"><strong>[orm] [bug] </strong></span><p>Fixed issue in association proxy due to <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3423">#3423</a> which caused the use
of custom <a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.interfaces.PropComparator" title="sqlalchemy.orm.interfaces.PropComparator"><code class="xref py py-class docutils literal notranslate"><span class="pre">PropComparator</span></code></a> objects with hybrid attributes, such as
the one demonstrated in  the <code class="docutils literal notranslate"><span class="pre">dictlike-polymorphic</span></code> example to not
function within an association proxy.  The strictness that was added in
<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3423">#3423</a> has been relaxed, and additional logic to accommodate for
an association proxy that links to a custom hybrid have been added.</p>
<a class="changeset-link headerlink reference internal" href="#change-d2b955e8847391cb31690d7bf292ad08">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4446">#4446</a></p>
</p>
</li>
<li><p id="change-1.3.0b2-9"><span class="target" id="change-155445ae71bc6bd71bc606cbbc203d6e"><strong>[orm] [bug] </strong></span><p>Implemented the <code class="docutils literal notranslate"><span class="pre">.get_history()</span></code> method, which also implies availability
of <code class="xref py py-attr docutils literal notranslate"><span class="pre">AttributeState.history</span></code>, for <a class="reference internal" href="../orm/mapped_attributes.html#sqlalchemy.orm.synonym" title="sqlalchemy.orm.synonym"><code class="xref py py-func docutils literal notranslate"><span class="pre">synonym()</span></code></a> attributes.
Previously, trying to access attribute history via a synonym would raise an
<code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>.</p>
<a class="changeset-link headerlink reference internal" href="#change-155445ae71bc6bd71bc606cbbc203d6e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3777">#3777</a></p>
</p>
</li>
<li><p id="change-1.3.0b2-10"><span class="target" id="change-91d164d060931acf4b7b0b5fcc836ef5"><strong>[orm] [change] </strong></span><p>Added a new function <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.close_all_sessions" title="sqlalchemy.orm.session.close_all_sessions"><code class="xref py py-func docutils literal notranslate"><span class="pre">close_all_sessions()</span></code></a> which takes
over the task of the <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.close_all" title="sqlalchemy.orm.session.Session.close_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.close_all()</span></code></a> method, which
is now deprecated as this is confusing as a classmethod.
Pull request courtesy Augustin Trancart.</p>
<a class="changeset-link headerlink reference internal" href="#change-91d164d060931acf4b7b0b5fcc836ef5">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4412">#4412</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0b2-orm-declarative">
<h3>orm declarative<a class="headerlink" href="#change-1.3.0b2-orm-declarative" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b2-11"><span class="target" id="change-317f6719daf2eb3a27c25ffa431a70da"><strong>[orm declarative] [bug] </strong></span><p>Added a <code class="docutils literal notranslate"><span class="pre">__clause_element__()</span></code> method to <a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.properties.ColumnProperty" title="sqlalchemy.orm.properties.ColumnProperty"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnProperty</span></code></a> which
can allow the usage of a not-fully-declared column or deferred attribute in
a declarative mapped class slightly more friendly when it’s used in a
constraint or other column-oriented scenario within the class declaration,
though this still can’t work in open-ended expressions; prefer to call the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">ColumnProperty.expression</span></code> attribute if receiving <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>.</p>
<a class="changeset-link headerlink reference internal" href="#change-317f6719daf2eb3a27c25ffa431a70da">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4372">#4372</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0b2-engine">
<h3>engine<a class="headerlink" href="#change-1.3.0b2-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b2-12"><span class="target" id="change-8cd1c34d591605e6915158d33d334b73"><strong>[engine] [feature] </strong></span><p>Added public accessor <code class="xref py py-meth docutils literal notranslate"><span class="pre">QueuePool.timeout()</span></code> that returns the configured
timeout for a <a class="reference internal" href="../core/pooling.html#sqlalchemy.pool.QueuePool" title="sqlalchemy.pool.QueuePool"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueuePool</span></code></a> object.  Pull request courtesy Irina Delamare.</p>
<a class="changeset-link headerlink reference internal" href="#change-8cd1c34d591605e6915158d33d334b73">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3689">#3689</a></p>
</p>
</li>
<li><p id="change-1.3.0b2-13"><span class="target" id="change-b4f464d4ac6bb689736f87e3aa169707"><strong>[engine] [change] </strong></span><p>The “threadlocal” engine strategy which has been a legacy feature of
SQLAlchemy since around version 0.2 is now deprecated, along with the
<a class="reference internal" href="../core/pooling.html#sqlalchemy.pool.Pool.params.threadlocal" title="sqlalchemy.pool.Pool"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Pool.threadlocal</span></code></a> parameter of <a class="reference internal" href="../core/pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> which has no
effect in most modern use cases.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4393-threadlocal"><span class="std std-ref">“threadlocal” engine strategy deprecated</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-b4f464d4ac6bb689736f87e3aa169707">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4393">#4393</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0b2-sql">
<h3>sql<a class="headerlink" href="#change-1.3.0b2-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b2-14"><span class="target" id="change-0e26b03ec9e5135d1a2f6b009a0bfa8b"><strong>[sql] [feature] </strong></span><p>Amended the <a class="reference internal" href="../core/functions.html#sqlalchemy.sql.functions.AnsiFunction" title="sqlalchemy.sql.functions.AnsiFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AnsiFunction</span></code></a> class, the base of common SQL
functions like <code class="docutils literal notranslate"><span class="pre">CURRENT_TIMESTAMP</span></code>, to accept positional arguments
like a regular ad-hoc function.  This to suit the case that many of
these functions on specific backends accept arguments such as
“fractional seconds” precision and such.  If the function is created
with arguments, it renders the parenthesis and the arguments.  If
no arguments are present, the compiler generates the non-parenthesized form.</p>
<a class="changeset-link headerlink reference internal" href="#change-0e26b03ec9e5135d1a2f6b009a0bfa8b">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4386">#4386</a></p>
</p>
</li>
<li><p id="change-1.3.0b2-15"><span class="target" id="change-a4c66fb948a7b7e678b45144aa05d940"><strong>[sql] [change] </strong></span><p>The <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine.params.convert_unicode" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.convert_unicode</span></code></a> and
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.String.params.convert_unicode" title="sqlalchemy.types.String"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">String.convert_unicode</span></code></a> parameters have been deprecated.  These
parameters were built back when most Python DBAPIs had little to no support
for Python Unicode objects, and SQLAlchemy needed to take on the very
complex task of marshalling data and SQL strings between Unicode and
bytestrings throughout the system in a performant way.  Thanks to Python 3,
DBAPIs were compelled to adapt to Unicode-aware APIs and today all DBAPIs
supported by SQLAlchemy support Unicode natively, including on Python 2,
allowing this long-lived and very complicated feature to finally be (mostly)
removed.  There are still of course a few Python 2 edge cases where
SQLAlchemy has to deal with Unicode however these are handled automatically;
in modern use, there should be no need for end-user interaction with these
flags.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4393-convertunicode"><span class="std std-ref">convert_unicode parameters deprecated</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-a4c66fb948a7b7e678b45144aa05d940">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4393">#4393</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0b2-mssql">
<h3>mssql<a class="headerlink" href="#change-1.3.0b2-mssql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b2-16"><span class="target" id="change-f0b4de97ec1342d9d0b0c78034929cdd"><strong>[mssql] [bug] </strong></span><p>The <code class="docutils literal notranslate"><span class="pre">literal_processor</span></code> for the <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Unicode" title="sqlalchemy.types.Unicode"><code class="xref py py-class docutils literal notranslate"><span class="pre">Unicode</span></code></a> and
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.UnicodeText" title="sqlalchemy.types.UnicodeText"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnicodeText</span></code></a> datatypes now render an <code class="docutils literal notranslate"><span class="pre">N</span></code> character in front of
the literal string expression as required by SQL Server for Unicode string
values rendered in SQL expressions.</p>
<a class="changeset-link headerlink reference internal" href="#change-f0b4de97ec1342d9d0b0c78034929cdd">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4442">#4442</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0b2-misc">
<h3>misc<a class="headerlink" href="#change-1.3.0b2-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b2-17"><span class="target" id="change-4ae4f352dab5c983ba9413aaab186694"><strong>[bug] [ext] </strong></span><p>Fixed a regression in 1.3.0b1 caused by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3423">#3423</a> where association
proxy objects that access an attribute that’s only present on a polymorphic
subclass would raise an <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> even though the actual instance
being accessed was an instance of that subclass.</p>
<a class="changeset-link headerlink reference internal" href="#change-4ae4f352dab5c983ba9413aaab186694">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4401">#4401</a></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-1.3.0b1">
<h2>1.3.0b1<a class="headerlink" href="#change-1.3.0b1" title="Permalink to this headline">¶</a></h2>
Released: November 16, 2018<div class="section" id="change-1.3.0b1-orm">
<h3>orm<a class="headerlink" href="#change-1.3.0b1-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b1-0"><span class="target" id="change-82670998e42ec619e51a2cbd5bac57d0"><strong>[orm] [feature] </strong></span><p>Added new feature <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.only_return_tuples" title="sqlalchemy.orm.query.Query.only_return_tuples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.only_return_tuples()</span></code></a>.  Causes the
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> object to return keyed tuple objects unconditionally even
if the query is against a single entity.   Pull request courtesy Eric
Atkin.</p>
<a class="changeset-link headerlink reference internal" href="#change-82670998e42ec619e51a2cbd5bac57d0">¶</a><p>This change is also <strong>backported</strong> to: 1.2.5</p>
<p></p>
</p>
</li>
<li><p id="change-1.3.0b1-1"><span class="target" id="change-74af19c2c3a9f1fdd4f9920a1a96b50e"><strong>[orm] [feature] </strong></span><p>Added new flag <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.bulk_save_objects.params.preserve_order" title="sqlalchemy.orm.session.Session.bulk_save_objects"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.bulk_save_objects.preserve_order</span></code></a> to the
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.bulk_save_objects" title="sqlalchemy.orm.session.Session.bulk_save_objects"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.bulk_save_objects()</span></code></a> method, which defaults to True. When set
to False, the given mappings will be grouped into inserts and updates per
each object type, to allow for greater opportunities to batch common
operations together.  Pull request courtesy Alessandro Cucci.</p>
<a class="changeset-link headerlink reference internal" href="#change-74af19c2c3a9f1fdd4f9920a1a96b50e">¶</a><p></p>
</p>
</li>
<li><p id="change-1.3.0b1-2"><span class="target" id="change-9d01ecd75495e32dcaf9bfed6d4168fb"><strong>[orm] [feature] </strong></span><p>The “selectin” loader strategy now omits the JOIN in the case of a simple
one-to-many load, where it instead relies loads only from the related
table, relying upon the foreign key columns of the related table in order
to match up to primary keys in the parent table.   This optimization can be
disabled by setting the <a class="reference internal" href="../orm/relationship_api.html#sqlalchemy.orm.relationship.params.omit_join" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.omit_join</span></code></a> flag to False.
Many thanks to Jayson Reis for the efforts on this.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4340"><span class="std std-ref">selectin loading no longer uses JOIN for simple one-to-many</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-9d01ecd75495e32dcaf9bfed6d4168fb">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4340">#4340</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-3"><span class="target" id="change-aeb0f6a92ae8559fd93969741f95c9ff"><strong>[orm] [feature] </strong></span><p>Added <code class="docutils literal notranslate"><span class="pre">.info</span></code> dictionary to the <a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.state.InstanceState" title="sqlalchemy.orm.state.InstanceState"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstanceState</span></code></a> class, the object
that comes from calling <a class="reference internal" href="../core/inspection.html#sqlalchemy.inspection.inspect" title="sqlalchemy.inspection.inspect"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect()</span></code></a> on a mapped object.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4257"><span class="std std-ref">info dictionary added to InstanceState</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-aeb0f6a92ae8559fd93969741f95c9ff">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4257">#4257</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-4"><span class="target" id="change-90b24d2b4df07a21c167a98323104f4e"><strong>[orm] [bug] </strong></span><p>Fixed bug where use of <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Lateral" title="sqlalchemy.sql.expression.Lateral"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lateral</span></code></a> construct in conjunction with
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.join()</span></code></a> as well as <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.select_entity_from" title="sqlalchemy.orm.query.Query.select_entity_from"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.select_entity_from()</span></code></a> would not
apply clause adaption to the right side of the join.   “lateral” introduces
the use case of the right side of a join being correlatable.  Previously,
adaptation of this clause wasn’t considered.   Note that in 1.2 only,
a selectable introduced by <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.subquery" title="sqlalchemy.orm.query.Query.subquery"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.subquery()</span></code></a> is still not adapted
due to <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4304">#4304</a>; the selectable needs to be produced by the
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a> function to be the right side of the “lateral” join.</p>
<a class="changeset-link headerlink reference internal" href="#change-90b24d2b4df07a21c167a98323104f4e">¶</a><p>This change is also <strong>backported</strong> to: 1.2.12</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4334">#4334</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-5"><span class="target" id="change-fe5ca788e10f93a43a134c3e104d47ed"><strong>[orm] [bug] </strong></span><p>Fixed issue regarding passive_deletes=”all”, where the foreign key
attribute of an object is maintained with its value even after the object
is removed from its parent collection.  Previously, the unit of work would
set this to NULL even though passive_deletes indicated it should not be
modified.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-3844"><span class="std std-ref">passive_deletes=’all’ will leave FK unchanged for object removed from collection</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-fe5ca788e10f93a43a134c3e104d47ed">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3844">#3844</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-6"><span class="target" id="change-8810507a2cb170c19ab69225b6e011cd"><strong>[orm] [bug] </strong></span><p>Improved the behavior of a relationship-bound many-to-one object expression
such that the retrieval of column values on the related object are now
resilient against the object being detached from its parent
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>, even if the attribute has been expired.  New features
within the <a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.state.InstanceState" title="sqlalchemy.orm.state.InstanceState"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstanceState</span></code></a> are used to memoize the last known value
of a particular column attribute before its expired, so that the expression
can still evaluate when the object is detached and expired at the same
time.  Error conditions are also improved using modern attribute state
features to produce more specific messages as needed.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4359"><span class="std std-ref">Improvement to the behavior of many-to-one query expressions</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-8810507a2cb170c19ab69225b6e011cd">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4359">#4359</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-7"><span class="target" id="change-b0abbcc6d85a806caf5e58024c13e001"><strong>[orm] [bug] [mysql] [postgresql] </strong></span><p>The ORM now doubles the “FOR UPDATE” clause within the subquery that
renders in conjunction with joined eager loading in some cases, as it has
been observed that MySQL does not lock the rows from a subquery.   This
means the query renders with two FOR UPDATE clauses; note that on some
backends such as Oracle, FOR UPDATE clauses on subqueries are silently
ignored since they are unnecessary.  Additionally, in the case of the “OF”
clause used primarily with PostgreSQL, the FOR UPDATE is rendered only on
the inner subquery when this is used so that the selectable can be targeted
to the table within the SELECT statement.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4246"><span class="std std-ref">FOR UPDATE clause is rendered within the joined eager load subquery as well as outside</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-b0abbcc6d85a806caf5e58024c13e001">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4246">#4246</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-8"><span class="target" id="change-58f7747db4d2ca6a9ff6f7d86132b6d1"><strong>[orm] [bug] </strong></span><p>Refactored <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.join()</span></code></a> to further clarify the individual components
of structuring the join. This refactor adds the ability for
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.join()</span></code></a> to determine the most appropriate “left” side of the
join when there is more than one element in the FROM list or the query is
against multiple entities.  If more than one FROM/entity matches, an error
is raised that asks for an ON clause to be specified to resolve the
ambiguity.  In particular this targets the regression we saw in
<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4363">#4363</a> but is also of general use.   The codepaths within
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.join()</span></code></a> are now easier to follow and the error cases are
decided more specifically at an earlier point in the operation.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4365"><span class="std std-ref">Query.join() handles ambiguity in deciding the “left” side more explicitly</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-58f7747db4d2ca6a9ff6f7d86132b6d1">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4365">#4365</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-9"><span class="target" id="change-d6ba069fbb7edc3c9b392de4ec0aa4b9"><strong>[orm] [bug] </strong></span><p>Fixed long-standing issue in <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> where a scalar subquery such
as produced by <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.exists" title="sqlalchemy.orm.query.Query.exists"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.exists()</span></code></a>, <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.as_scalar" title="sqlalchemy.orm.query.Query.as_scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.as_scalar()</span></code></a> and other
derivations from <code class="xref py py-attr docutils literal notranslate"><span class="pre">Query.statement</span></code> would not correctly be adapted
when used in a new <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> that required entity adaptation, such as
when the query were turned into a union, or a from_self(), etc. The change
removes the “no adaptation” annotation from the <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a> object
produced by the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Query.statement</span></code> accessor.</p>
<a class="changeset-link headerlink reference internal" href="#change-d6ba069fbb7edc3c9b392de4ec0aa4b9">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4304">#4304</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-10"><span class="target" id="change-1edbb0caaa73c3616a385f1125e591eb"><strong>[orm] [bug] </strong></span><p>An informative exception is re-raised when a primary key value is not
sortable in Python during an ORM flush under Python 3, such as an <code class="docutils literal notranslate"><span class="pre">Enum</span></code>
that has no <code class="docutils literal notranslate"><span class="pre">__lt__()</span></code> method; normally Python 3 raises a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>
in this case.   The flush process sorts persistent objects by primary key
in Python so the values must be sortable.</p>
<a class="changeset-link headerlink reference internal" href="#change-1edbb0caaa73c3616a385f1125e591eb">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4232">#4232</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-11"><span class="target" id="change-3ac5fa358763be242bfc623eaecd92a7"><strong>[orm] [bug] </strong></span><p>Removed the collection converter used by the <a class="reference internal" href="../orm/collections.html#sqlalchemy.orm.collections.MappedCollection" title="sqlalchemy.orm.collections.MappedCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappedCollection</span></code></a>
class. This converter was used only to assert that the incoming dictionary
keys matched that of their corresponding objects, and only during a bulk set
operation.  The converter can interfere with a custom validator or
<a class="reference internal" href="../orm/events.html#sqlalchemy.orm.events.AttributeEvents.bulk_replace" title="sqlalchemy.orm.events.AttributeEvents.bulk_replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AttributeEvents.bulk_replace()</span></code></a> listener that wants to convert
incoming values further.  The <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> which would be raised by this
converter when an incoming key didn’t match the value is removed; incoming
values during a bulk assignment will be keyed to their value-generated key,
and not the key that’s explicitly present in the dictionary.</p>
<p>Overall, &#64;converter is superseded by the
<a class="reference internal" href="../orm/events.html#sqlalchemy.orm.events.AttributeEvents.bulk_replace" title="sqlalchemy.orm.events.AttributeEvents.bulk_replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AttributeEvents.bulk_replace()</span></code></a> event handler added as part of
<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3896">#3896</a>.</p>
<a class="changeset-link headerlink reference internal" href="#change-3ac5fa358763be242bfc623eaecd92a7">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3604">#3604</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-12"><span class="target" id="change-9680d97f1ca1a315f99faf211e2c777c"><strong>[orm] [bug] </strong></span><p>Added new behavior to the lazy load that takes place when the “old” value of
a many-to-one is retrieved, such that exceptions which would be raised due
to either <code class="docutils literal notranslate"><span class="pre">lazy=&quot;raise&quot;</span></code> or a detached session error are skipped.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4353"><span class="std std-ref">Many-to-one replacement won’t raise for “raiseload” or detached for “old” object</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-9680d97f1ca1a315f99faf211e2c777c">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4353">#4353</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-13"><span class="target" id="change-fdaae3c040ae7c8ea321a730e5938d5c"><strong>[orm] [bug] </strong></span><p>A long-standing oversight in the ORM, the <code class="docutils literal notranslate"><span class="pre">__delete__</span></code> method for a many-
to-one relationship was non-functional, e.g. for an operation such as <code class="docutils literal notranslate"><span class="pre">del</span>
<span class="pre">a.b</span></code>.  This is now implemented and is equivalent to setting the attribute
to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4354"><span class="std std-ref">“del” implemented for ORM attributes</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-fdaae3c040ae7c8ea321a730e5938d5c">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4354">#4354</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0b1-orm-declarative">
<h3>orm declarative<a class="headerlink" href="#change-1.3.0b1-orm-declarative" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b1-14"><span class="target" id="change-5da521e28035da8c188413c97b5b25e6"><strong>[bug] [declarative] [orm] </strong></span><p>Fixed bug where declarative would not update the state of the
<a class="reference internal" href="../orm/mapping_api.html#sqlalchemy.orm.mapper.Mapper" title="sqlalchemy.orm.mapper.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> as far as what attributes were present, when additional
attributes were added or removed after the mapper attribute collections had
already been called and memoized.  Additionally, a <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code>
is now raised if a fully mapped attribute (e.g. column, relationship, etc.)
is deleted from a class that is currently mapped, since the mapper will not
function correctly if the attribute has been removed.</p>
<a class="changeset-link headerlink reference internal" href="#change-5da521e28035da8c188413c97b5b25e6">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4133">#4133</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0b1-engine">
<h3>engine<a class="headerlink" href="#change-1.3.0b1-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b1-15"><span class="target" id="change-4ef9a807aeffe2e9a49a9e80121b1924"><strong>[engine] [feature] </strong></span><p>Added new “lifo” mode to <a class="reference internal" href="../core/pooling.html#sqlalchemy.pool.QueuePool" title="sqlalchemy.pool.QueuePool"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueuePool</span></code></a>, typically enabled by setting
the flag <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine.params.pool_use_lifo" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.pool_use_lifo</span></code></a> to True.   “lifo” mode
means the same connection just checked in will be the first to be checked
out again, allowing excess connections to be cleaned up from the server
side during periods of the pool being only partially utilized.  Pull request
courtesy Taem Park.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-pr467"><span class="std std-ref">New last-in-first-out strategy for QueuePool</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-4ef9a807aeffe2e9a49a9e80121b1924">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0b1-sql">
<h3>sql<a class="headerlink" href="#change-1.3.0b1-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b1-16"><span class="target" id="change-f8553fccc490c50b62ae6d3cd1a6e051"><strong>[sql] [feature] </strong></span><p>Refactored <a class="reference internal" href="../core/internals.html#sqlalchemy.sql.compiler.SQLCompiler" title="sqlalchemy.sql.compiler.SQLCompiler"><code class="xref py py-class docutils literal notranslate"><span class="pre">SQLCompiler</span></code></a> to expose a
<a class="reference internal" href="../core/internals.html#sqlalchemy.sql.compiler.SQLCompiler.group_by_clause" title="sqlalchemy.sql.compiler.SQLCompiler.group_by_clause"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SQLCompiler.group_by_clause()</span></code></a> method similar to the
<a class="reference internal" href="../core/internals.html#sqlalchemy.sql.compiler.SQLCompiler.order_by_clause" title="sqlalchemy.sql.compiler.SQLCompiler.order_by_clause"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SQLCompiler.order_by_clause()</span></code></a> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">SQLCompiler.limit_clause()</span></code>
methods, which can be overridden by dialects to customize how GROUP BY
renders.  Pull request courtesy Samuel Chou.</p>
<a class="changeset-link headerlink reference internal" href="#change-f8553fccc490c50b62ae6d3cd1a6e051">¶</a><p>This change is also <strong>backported</strong> to: 1.2.13</p>
<p></p>
</p>
</li>
<li><p id="change-1.3.0b1-17"><span class="target" id="change-64b2c0b2ea56a550d42b32f946bb843c"><strong>[sql] [feature] </strong></span><p>Added <a class="reference internal" href="../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> to the “string SQL” system that will render a
meaningful string expression (<code class="docutils literal notranslate"><span class="pre">&quot;&lt;next</span> <span class="pre">sequence</span> <span class="pre">value:</span> <span class="pre">my_sequence&gt;&quot;</span></code>)
when stringifying without a dialect a statement that includes a “sequence
nextvalue” expression, rather than raising a compilation error.</p>
<a class="changeset-link headerlink reference internal" href="#change-64b2c0b2ea56a550d42b32f946bb843c">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4144">#4144</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-18"><span class="target" id="change-58b8e69a995c21d8bfd9890f43d7e60b"><strong>[sql] [feature] </strong></span><p>Added new naming convention tokens <code class="docutils literal notranslate"><span class="pre">column_0N_name</span></code>, <code class="docutils literal notranslate"><span class="pre">column_0_N_name</span></code>,
etc., which will render the names / keys / labels for all columns referenced
by a particular constraint in a sequence.  In order to accommodate for the
length of such a naming convention, the SQL compiler’s auto-truncation
feature now applies itself to constraint names as well, which creates a
shortened, deterministically generated name for the constraint that will
apply to a target backend without going over the character limit of that
backend.</p>
<p>The change also repairs two other issues.  One is that the  <code class="docutils literal notranslate"><span class="pre">column_0_key</span></code>
token wasn’t available even though this token was documented, the other was
that the <code class="docutils literal notranslate"><span class="pre">referred_column_0_name</span></code> token would  inadvertently render the
<code class="docutils literal notranslate"><span class="pre">.key</span></code> and not the <code class="docutils literal notranslate"><span class="pre">.name</span></code> of the column if these two values were
different.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-3989"><span class="std std-ref">New multi-column naming convention tokens, long name truncation</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-58b8e69a995c21d8bfd9890f43d7e60b">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3989">#3989</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-19"><span class="target" id="change-cee1f4d663a92f30df15742c304c6961"><strong>[sql] [feature] </strong></span><p>Added new logic to the “expanding IN” bound parameter feature whereby if
the given list is empty, a special “empty set” expression that is specific
to different backends is generated, thus allowing IN expressions to be
fully dynamic including empty IN expressions.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4271"><span class="std std-ref">Expanding IN feature now supports empty lists</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-cee1f4d663a92f30df15742c304c6961">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4271">#4271</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-20"><span class="target" id="change-29f7f330efd224a685fd110dbc955601"><strong>[sql] [feature] </strong></span><p>The Python builtin <code class="docutils literal notranslate"><span class="pre">dir()</span></code> is now supported for a SQLAlchemy “properties”
object, such as that of a Core columns collection (e.g. <code class="docutils literal notranslate"><span class="pre">.c</span></code>),
<code class="docutils literal notranslate"><span class="pre">mapper.attrs</span></code>, etc.  Allows iPython autocompletion to work as well.
Pull request courtesy Uwe Korn.</p>
<a class="changeset-link headerlink reference internal" href="#change-29f7f330efd224a685fd110dbc955601">¶</a><p></p>
</p>
</li>
<li><p id="change-1.3.0b1-21"><span class="target" id="change-74d53ea4beaacc61386292725463830a"><strong>[sql] [feature] </strong></span><p>Added new feature <a class="reference internal" href="../core/functions.html#sqlalchemy.sql.functions.FunctionElement.as_comparison" title="sqlalchemy.sql.functions.FunctionElement.as_comparison"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FunctionElement.as_comparison()</span></code></a> which allows a SQL
function to act as a binary comparison operation that can work within the
ORM.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-3831"><span class="std std-ref">Binary comparison interpretation for SQL functions</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-74d53ea4beaacc61386292725463830a">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3831">#3831</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-22"><span class="target" id="change-f689a26d3629c6719377d1fcee2eee72"><strong>[sql] [bug] </strong></span><p>Added “like” based operators as “comparison” operators, including
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.startswith" title="sqlalchemy.sql.operators.ColumnOperators.startswith"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnOperators.startswith()</span></code></a> <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.endswith" title="sqlalchemy.sql.operators.ColumnOperators.endswith"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnOperators.endswith()</span></code></a>
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.ilike" title="sqlalchemy.sql.operators.ColumnOperators.ilike"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnOperators.ilike()</span></code></a> <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.notilike" title="sqlalchemy.sql.operators.ColumnOperators.notilike"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnOperators.notilike()</span></code></a> among many
others, so that all of these operators can be the basis for an ORM
“primaryjoin” condition.</p>
<a class="changeset-link headerlink reference internal" href="#change-f689a26d3629c6719377d1fcee2eee72">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4302">#4302</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-23"><span class="target" id="change-a8c39b13d40954d1ec2fa413ba93283e"><strong>[sql] [bug] </strong></span><p>Fixed issue with <a class="reference internal" href="../core/type_api.html#sqlalchemy.types.TypeEngine.bind_expression" title="sqlalchemy.types.TypeEngine.bind_expression"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TypeEngine.bind_expression()</span></code></a> and
<a class="reference internal" href="../core/type_api.html#sqlalchemy.types.TypeEngine.column_expression" title="sqlalchemy.types.TypeEngine.column_expression"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TypeEngine.column_expression()</span></code></a> methods where these methods would not
work if the target type were part of a <a class="reference internal" href="../core/type_api.html#sqlalchemy.types.Variant" title="sqlalchemy.types.Variant"><code class="xref py py-class docutils literal notranslate"><span class="pre">Variant</span></code></a>, or other target
type of a <a class="reference internal" href="../core/custom_types.html#sqlalchemy.types.TypeDecorator" title="sqlalchemy.types.TypeDecorator"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code></a>.  Additionally, the SQL compiler now
calls upon the dialect-level implementation when it renders these methods
so that dialects can now provide for SQL-level processing for built-in
types.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-3981"><span class="std std-ref">TypeEngine methods bind_expression, column_expression work with Variant, type-specific types</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-a8c39b13d40954d1ec2fa413ba93283e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3981">#3981</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0b1-postgresql">
<h3>postgresql<a class="headerlink" href="#change-1.3.0b1-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b1-24"><span class="target" id="change-b9f84975e2ff0494556c8760438ab9fe"><strong>[postgresql] [feature] </strong></span><p>Added new PG type <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.REGCLASS" title="sqlalchemy.dialects.postgresql.REGCLASS"><code class="xref py py-class docutils literal notranslate"><span class="pre">postgresql.REGCLASS</span></code></a> which assists in casting
table names to OID values.  Pull request courtesy Sebastian Bank.</p>
<a class="changeset-link headerlink reference internal" href="#change-b9f84975e2ff0494556c8760438ab9fe">¶</a><p>This change is also <strong>backported</strong> to: 1.2.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4160">#4160</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-25"><span class="target" id="change-5f24a76d22ad3e2a0fb7605aadcd657b"><strong>[postgresql] [feature] </strong></span><p>Added rudimental support for reflection of PostgreSQL
partitioned tables, e.g. that relkind=’p’ is added to reflection
queries that return table information.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4237"><span class="std std-ref">Added basic reflection support for PostgreSQL partitioned tables</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-5f24a76d22ad3e2a0fb7605aadcd657b">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4237">#4237</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0b1-mysql">
<h3>mysql<a class="headerlink" href="#change-1.3.0b1-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b1-26"><span class="target" id="change-2ca251ff461d74aacf027f3eed92844a"><strong>[mysql] [feature] </strong></span><p>Support added for the “WITH PARSER” syntax of CREATE FULLTEXT INDEX
in MySQL, using the <code class="docutils literal notranslate"><span class="pre">mysql_with_parser</span></code> keyword argument.  Reflection
is also supported, which accommodates MySQL’s special comment format
for reporting on this option as well.  Additionally, the “FULLTEXT” and
“SPATIAL” index prefixes are now reflected back into the <code class="docutils literal notranslate"><span class="pre">mysql_prefix</span></code>
index option.</p>
<a class="changeset-link headerlink reference internal" href="#change-2ca251ff461d74aacf027f3eed92844a">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4219">#4219</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-27"><span class="target" id="change-d48f2305e0809a3bf9a1eac6e6fd4f65"><strong>[mysql] [feature] </strong></span><p>Added support for the parameters in an ON DUPLICATE KEY UPDATE statement on
MySQL to be ordered, since parameter order in a MySQL UPDATE clause is
significant, in a similar manner as that described at
<a class="reference internal" href="../core/tutorial.html#updates-order-parameters"><span class="std std-ref">Parameter-Ordered Updates</span></a>.  Pull request courtesy Maxim Bublis.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-mysql-ondupordering"><span class="std std-ref">Control of parameter ordering within ON DUPLICATE KEY UPDATE</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-d48f2305e0809a3bf9a1eac6e6fd4f65">¶</a><p></p>
</p>
</li>
<li><p id="change-1.3.0b1-28"><span class="target" id="change-3f995f0f9ddd4176100a62954596165a"><strong>[mysql] [feature] </strong></span><p>The “pre-ping” feature of the connection pool now uses
the <code class="docutils literal notranslate"><span class="pre">ping()</span></code> method of the DBAPI connection in the case of
mysqlclient, PyMySQL and mysql-connector-python.  Pull request
courtesy Maxim Bublis.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-mysql-ping"><span class="std std-ref">Protocol-level ping now used for pre-ping</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-3f995f0f9ddd4176100a62954596165a">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0b1-sqlite">
<h3>sqlite<a class="headerlink" href="#change-1.3.0b1-sqlite" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b1-29"><span class="target" id="change-ae84b9438454d2b118f79e2c77b514b8"><strong>[sqlite] [feature] </strong></span><p>Added support for SQLite’s json functionality via the new
SQLite implementation for <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.JSON" title="sqlalchemy.types.JSON"><code class="xref py py-class docutils literal notranslate"><span class="pre">types.JSON</span></code></a>, <a class="reference internal" href="../dialects/sqlite.html#sqlalchemy.dialects.sqlite.JSON" title="sqlalchemy.dialects.sqlite.JSON"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlite.JSON</span></code></a>.
The name used for the type is <code class="docutils literal notranslate"><span class="pre">JSON</span></code>, following an example found at
SQLite’s own documentation. Pull request courtesy Ilja Everilä.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-3850"><span class="std std-ref">Support for SQLite JSON Added</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-ae84b9438454d2b118f79e2c77b514b8">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3850">#3850</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-30"><span class="target" id="change-670275150261403de3cd1c425b604685"><strong>[sqlite] [feature] </strong></span><p>Implemented the SQLite <code class="docutils literal notranslate"><span class="pre">ON</span> <span class="pre">CONFLICT</span></code> clause as understood at the DDL
level, e.g. for primary key, unique, and CHECK constraints as well as
specified on a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> to satisfy inline primary key and NOT NULL.
Pull request courtesy Denis Kataev.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4360"><span class="std std-ref">Support for SQLite ON CONFLICT in constraints added</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-670275150261403de3cd1c425b604685">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4360">#4360</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0b1-mssql">
<h3>mssql<a class="headerlink" href="#change-1.3.0b1-mssql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b1-31"><span class="target" id="change-22124fa5c93f7a843ededffef565710a"><strong>[mssql] [feature] </strong></span><p>Added <code class="docutils literal notranslate"><span class="pre">fast_executemany=True</span></code> parameter to the SQL Server pyodbc dialect,
which enables use of pyodbc’s new performance feature of the same name
when using Microsoft ODBC drivers.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4158"><span class="std std-ref">Support for pyodbc fast_executemany</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-22124fa5c93f7a843ededffef565710a">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4158">#4158</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-32"><span class="target" id="change-66176c8a7b5a187f268e1ce7803f3a21"><strong>[mssql] [bug] </strong></span><p>Deprecated the use of <a class="reference internal" href="../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> with SQL Server in order to affect
the “start” and “increment” of the IDENTITY value, in favor of new
parameters <code class="docutils literal notranslate"><span class="pre">mssql_identity_start</span></code> and <code class="docutils literal notranslate"><span class="pre">mssql_identity_increment</span></code> which
set these parameters directly.  <a class="reference internal" href="../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> will be used to generate
real <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">SEQUENCE</span></code> DDL with SQL Server in a future release.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4362"><span class="std std-ref">New parameters to affect IDENTITY start and increment, use of Sequence deprecated</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-66176c8a7b5a187f268e1ce7803f3a21">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4362">#4362</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0b1-oracle">
<h3>oracle<a class="headerlink" href="#change-1.3.0b1-oracle" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b1-33"><span class="target" id="change-39b6e94b3055af74e4ca5816d0afad01"><strong>[oracle] [feature] </strong></span><p>Added a new event currently used only by the cx_Oracle dialect,
<code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectEvents.setiputsizes()</span></code>.  The event passes a dictionary of
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.BindParameter" title="sqlalchemy.sql.expression.BindParameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">BindParameter</span></code></a> objects to DBAPI-specific type objects that will be
passed, after conversion to parameter names, to the cx_Oracle
<code class="docutils literal notranslate"><span class="pre">cursor.setinputsizes()</span></code> method.  This allows both visibility into the
setinputsizes process as well as the ability to alter the behavior of what
datatypes are passed to this method.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../dialects/oracle.html#cx-oracle-setinputsizes"><span class="std std-ref">Fine grained control over cx_Oracle data binding performance with setinputsizes</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-39b6e94b3055af74e4ca5816d0afad01">¶</a><p>This change is also <strong>backported</strong> to: 1.2.9</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4290">#4290</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-34"><span class="target" id="change-342d4880b6312dd4c15ee033fcfbea55"><strong>[oracle] [bug] </strong></span><p>Updated the parameters that can be sent to the cx_Oracle DBAPI to both allow
for all current parameters as well as for future parameters not added yet.
In addition, removed unused parameters that were deprecated in version 1.2,
and additionally we are now defaulting “threaded” to False.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4369"><span class="std std-ref">cx_Oracle connect arguments modernized, deprecated parameters removed</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-342d4880b6312dd4c15ee033fcfbea55">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4369">#4369</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-35"><span class="target" id="change-54fc6a60b98ea236b117f1a22bb56ac7"><strong>[oracle] [bug] </strong></span><p>The Oracle dialect will no longer use the NCHAR/NCLOB datatypes
represent generic unicode strings or clob fields in conjunction with
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Unicode" title="sqlalchemy.types.Unicode"><code class="xref py py-class docutils literal notranslate"><span class="pre">Unicode</span></code></a> and <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.UnicodeText" title="sqlalchemy.types.UnicodeText"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnicodeText</span></code></a> unless the flag
<code class="docutils literal notranslate"><span class="pre">use_nchar_for_unicode=True</span></code> is passed to <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> -
this includes CREATE TABLE behavior as well as <code class="docutils literal notranslate"><span class="pre">setinputsizes()</span></code> for
bound parameters.   On the read side, automatic Unicode conversion under
Python 2 has been added to CHAR/VARCHAR/CLOB result rows, to match the
behavior of cx_Oracle under Python 3.  In order to mitigate the performance
hit under Python 2, SQLAlchemy’s very performant (when C extensions
are built) native Unicode handlers are used under Python 2.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4242"><span class="std std-ref">National char datatypes de-emphasized for generic unicode, re-enabled with option</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-54fc6a60b98ea236b117f1a22bb56ac7">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4242">#4242</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.3.0b1-misc">
<h3>misc<a class="headerlink" href="#change-1.3.0b1-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.3.0b1-36"><span class="target" id="change-ebf60a359d3a5e8d3c048f04ce5781c9"><strong>[feature] [ext] </strong></span><p>Added new attribute <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.lazy_loaded_from" title="sqlalchemy.orm.query.Query.lazy_loaded_from"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Query.lazy_loaded_from</span></code></a> which is populated
with an <a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.state.InstanceState" title="sqlalchemy.orm.state.InstanceState"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstanceState</span></code></a> that is using this <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> in
order to lazy load a relationship.  The rationale for this is that
it serves as a hint for the horizontal sharding feature to use, such that
the identity token of the state can be used as the default identity token
to use for the query within id_chooser().</p>
<a class="changeset-link headerlink reference internal" href="#change-ebf60a359d3a5e8d3c048f04ce5781c9">¶</a><p>This change is also <strong>backported</strong> to: 1.2.9</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4243">#4243</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-37"><span class="target" id="change-f1c0a3193681c4bfd50ea6406c1d2749"><strong>[feature] [ext] </strong></span><p>Added new feature <a class="reference internal" href="../orm/extensions/baked.html#sqlalchemy.ext.baked.BakedQuery.to_query" title="sqlalchemy.ext.baked.BakedQuery.to_query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BakedQuery.to_query()</span></code></a>, which allows for a
clean way of using one <a class="reference internal" href="../orm/extensions/baked.html#sqlalchemy.ext.baked.BakedQuery" title="sqlalchemy.ext.baked.BakedQuery"><code class="xref py py-class docutils literal notranslate"><span class="pre">BakedQuery</span></code></a> as a subquery inside of another
<a class="reference internal" href="../orm/extensions/baked.html#sqlalchemy.ext.baked.BakedQuery" title="sqlalchemy.ext.baked.BakedQuery"><code class="xref py py-class docutils literal notranslate"><span class="pre">BakedQuery</span></code></a> without needing to refer explicitly to a
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.</p>
<a class="changeset-link headerlink reference internal" href="#change-f1c0a3193681c4bfd50ea6406c1d2749">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4318">#4318</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-38"><span class="target" id="change-73815ba967c39d874ec295a76ae7f007"><strong>[feature] [ext] </strong></span><p>The <a class="reference internal" href="../orm/extensions/associationproxy.html#sqlalchemy.ext.associationproxy.AssociationProxy" title="sqlalchemy.ext.associationproxy.AssociationProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">AssociationProxy</span></code></a> now has standard column comparison operations
such as <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.like" title="sqlalchemy.sql.operators.ColumnOperators.like"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnOperators.like()</span></code></a> and
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.startswith" title="sqlalchemy.sql.operators.ColumnOperators.startswith"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnOperators.startswith()</span></code></a> available when the target attribute is a
plain column - the EXISTS expression that joins to the target table is
rendered as usual, but the column expression is then use within the WHERE
criteria of the EXISTS.  Note that this alters the behavior of the
<code class="docutils literal notranslate"><span class="pre">.contains()</span></code> method on the association proxy to make use of
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.contains" title="sqlalchemy.sql.operators.ColumnOperators.contains"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnOperators.contains()</span></code></a> when used on a column-based attribute.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4351"><span class="std std-ref">AssociationProxy now provides standard column operators for a column-oriented target</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-73815ba967c39d874ec295a76ae7f007">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4351">#4351</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-39"><span class="target" id="change-419439dfcfd802c3c955085239eb1de3"><strong>[feature] [ext] </strong></span><p>Added support for bulk <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.update" title="sqlalchemy.orm.query.Query.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.update()</span></code></a> and <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.delete" title="sqlalchemy.orm.query.Query.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.delete()</span></code></a>
to the <a class="reference internal" href="../orm/extensions/horizontal_shard.html#sqlalchemy.ext.horizontal_shard.ShardedQuery" title="sqlalchemy.ext.horizontal_shard.ShardedQuery"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardedQuery</span></code></a> class within the horizontal sharding
extension.  This also adds an additional expansion hook to the
bulk update/delete methods <code class="xref py py-meth docutils literal notranslate"><span class="pre">Query._execute_crud()</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4196"><span class="std std-ref">Horizontal Sharding extension supports bulk update and delete methods</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-419439dfcfd802c3c955085239eb1de3">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4196">#4196</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-40"><span class="target" id="change-7063f0725026eae42ce1c653677cf03e"><strong>[bug] [ext] </strong></span><p>Reworked <a class="reference internal" href="../orm/extensions/associationproxy.html#sqlalchemy.ext.associationproxy.AssociationProxy" title="sqlalchemy.ext.associationproxy.AssociationProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">AssociationProxy</span></code></a> to store state that’s specific to a
parent class in a separate object, so that a single
<a class="reference internal" href="../orm/extensions/associationproxy.html#sqlalchemy.ext.associationproxy.AssociationProxy" title="sqlalchemy.ext.associationproxy.AssociationProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">AssociationProxy</span></code></a> can serve for multiple parent classes, as is
intrinsic to inheritance, without any ambiguity in the state returned by it.
A new method <a class="reference internal" href="../orm/extensions/associationproxy.html#sqlalchemy.ext.associationproxy.AssociationProxy.for_class" title="sqlalchemy.ext.associationproxy.AssociationProxy.for_class"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AssociationProxy.for_class()</span></code></a> is added to allow
inspection of class-specific state.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-3423"><span class="std std-ref">AssociationProxy stores class-specific state on a per-class basis</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-7063f0725026eae42ce1c653677cf03e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3423">#3423</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-41"><span class="target" id="change-7d951b9fa17f94ac1b534c0500404d54"><strong>[bug] [ext] </strong></span><p>The long-standing behavior of the association proxy collection maintaining
only a weak reference to the parent object is reverted; the proxy will now
maintain a strong reference to the parent for as long as the proxy
collection itself is also in memory, eliminating the “stale association
proxy” error. This change is being made on an experimental basis to see if
any use cases arise where it causes side effects.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4268"><span class="std std-ref">New Features and Improvements - Core</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-7d951b9fa17f94ac1b534c0500404d54">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4268">#4268</a></p>
</p>
</li>
<li><p id="change-1.3.0b1-42"><span class="target" id="change-f99ba5b9f18fee57c252f94a26324d04"><strong>[bug] [ext] </strong></span><p>Fixed multiple issues regarding de-association of scalar objects with the
association proxy.  <code class="docutils literal notranslate"><span class="pre">del</span></code> now works, and additionally a new flag
<a class="reference internal" href="../orm/extensions/associationproxy.html#sqlalchemy.ext.associationproxy.AssociationProxy.params.cascade_scalar_deletes" title="sqlalchemy.ext.associationproxy.AssociationProxy"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">AssociationProxy.cascade_scalar_deletes</span></code></a> is added, which when
set to True indicates that setting a scalar attribute to <code class="docutils literal notranslate"><span class="pre">None</span></code> or
deleting via <code class="docutils literal notranslate"><span class="pre">del</span></code> will also set the source association to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_13.html#change-4308"><span class="std std-ref">Association proxy has new cascade_scalar_deletes flag</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-f99ba5b9f18fee57c252f94a26324d04">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/4308">#4308</a></p>
</p>
</li>
</ul>
</div>
</div>
</div>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="migration_13.html" title="previous chapter">What’s New in SQLAlchemy 1.3?</a>
        Next:
        <a href="changelog_12.html" title="next chapter">1.2 Changelog</a>

    <div id="docs-copyright">
        &copy; <a href="../copyright.html">Copyright</a> 2007-2019, the SQLAlchemy authors and contributors.
        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 2.1.2.
    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '1.3.6',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../_static/detectmobile.js"></script>
    <script type="text/javascript" src="../_static/init.js"></script>


    </body>
</html>


